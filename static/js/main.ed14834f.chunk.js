(this["webpackJsonplero-app"]=this["webpackJsonplero-app"]||[]).push([[0],{158:function(e,t,n){"use strict";n.r(t),n.d(t,"registerServiceWorker",(function(){return at}));var a=n(0),r=n.n(a),c=n(10),o=n.n(c),i=n(212),s=n(216),l=n(40),u=n(31),d=n(106),j=n(8),f=n(16),b=n(203),p=n(34),O=n(12),h=n(213),g=n(214),v=n(215),x=n(66),m=n(219),y=n(205),C=n(206),S=n(209),w=n(210),k=n(211),E=n(207),N=n(99),T=n.n(N),_=n(100),I=n.n(_),R=n(97),A=n.n(R),F=n(98),L=n.n(F),U=n(101),z=n.n(U),D=n(220),B=n(204),G=(n(131),n(95)),H=n.n(G),V=n(217),W=n(96),M=n.n(W),q=n(94),P=n.n(q),Q=n(2),K=Object(b.a)((function(e){return{terminal:{fontFamily:"VCRMono",fontWeight:100,fontSize:16}}}));function $(e){var t=e.prefix,n=e.color,a=e.children,r=e.style,c=void 0===r?{}:r,o=K();return Object(Q.jsxs)("span",{className:o.terminal,style:Object(j.a)(Object(j.a)({},c),{},{color:n||"#fff"}),children:[t,a]})}var J=Object(b.a)((function(e){return{line:{marginBottom:4,marginTop:4,display:"grid",alignItems:"flex-start",overflowWrap:"anywhere",gridGap:10},bubble:{gridArea:"bubble",color:"#fff"},name:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gridArea:"name",overflowWrap:"anywhere"},none:{gridArea:"none"}}}));var X=function(e){var t=e.yourName,n=e.targetName,a=e.content,r=e.time,c=e.direction,o=J(),i="out"===c,s=i?"#b55f5f":"#b58f5f",l=r.toString().substr(10);return Object(Q.jsxs)("div",{className:o.line,style:i?{gridTemplateAreas:'"none bubble name"',gridTemplateColumns:"auto minmax(min-content, 100%) auto",textAlign:"right"}:{gridTemplateAreas:'"name bubble none"',gridTemplateColumns:"auto minmax(min-content, 100%) auto",textAlign:"left"},children:[Object(Q.jsx)("div",{className:o.bubble,children:Object(Q.jsx)($,{style:{fontWeight:100},children:a})}),Object(Q.jsxs)("div",{className:o.name,children:[Object(Q.jsx)($,{color:s,style:{fontWeight:500},children:i?"@"+t:"@"+n}),Object(Q.jsx)($,{color:s,style:{fontSize:"0.8em"},children:l})]}),Object(Q.jsx)("span",{className:o.none})]})},Y=n(26),Z=n.n(Y),ee=n(46),te=n(43),ne=n.n(te),ae="LOGIN_REQUEST",re="LOGIN_SUCCESS",ce="LOGIN_FAILURE",oe="LOGOUT",ie="SELECT_CONVERSATION",se="CLEAR_SELECT_CONVERSATION",le="CONVERSATION_RECEIVED_MESSAGE",ue="FETCH_CONVERSATION_REQUEST",de="FETCH_CONVERSATION_SUCCESS",je="FETCH_CONVERSATION_FAILURE",fe="FETCH_CURRENT_MESSAGES_REQUEST",be="FETCH_CURRENT_MESSAGES_SUCCESS",pe="FETCH_CURRENT_MESSAGES_FAILURE",Oe="SOCKET_REQUEST",he="SOCKET_CONNECT",ge="SOCKET_FAILURE",ve="https://polar-ridge-40128.herokuapp.com",xe=n(93),me=Object(b.a)((function(e){return{root:{flexGrow:0,position:"relative"},socketDown:{width:"100%",height:"100%",background:"#00000055",position:"absolute"},head:{paddingBottom:8,paddingLeft:5,paddingRight:5,display:"grid",gridTemplateColumns:"auto 1fr auto",gridColumnGap:15,alignItems:"center",textAlign:"right"},paper:{padding:"10px 15px",color:"#fff",display:"grid",gridTemplateRows:"55px 10px 55vh 10px 40px"},messages:{display:"flex",flexDirection:"column-reverse",overflowX:"hidden",overflowY:"overlay",paddingRight:20,paddingBottom:5},inputBar:{display:"grid",gridTemplateColumns:"1fr 40px",alignItems:"center",paddingTop:5,paddingBottom:5},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var ye=Object(f.b)((function(e){return{currentUser:e.account.user,conversation:e.conversation.currentConversation,loading:e.conversation.loading,socket:e.socketConnection.socket,socketConnected:e.socketConnection.connected}}),(function(e){return{onReceivedMessage:function(t,n){return e(function(e,t){var n=e.message,a=e.conversation;return{type:le,payload:{message:{id:n.id,content:n.content,time:n.time,direction:n.user_id===t.id?"out":"in"},conversation:a}}}(t,n))},clearSelectConversation:function(){return e({type:se})},fetchCurrentMessages:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ee.a)(Z.a.mark((function a(r){var c,o;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:fe}),a.prev=1,c=localStorage.getItem("auth_token"),a.next=5,ne.a.get(ve+"/api/conversations/".concat(e,"/messages"),{headers:{Authorization:"Bearer ".concat(c)}});case 5:if((o=a.sent).data.success){a.next=9;break}throw o.data;case 9:r({type:be,payload:o.data}),t(),a.next=18;break;case 13:a.prev=13,a.t0=a.catch(1),console.warn(a.t0),r({type:pe}),n();case 18:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))}}}))(Object(l.b)((function(e){var t=e.currentUser,n=e.conversation,c=e.fetchCurrentMessages,o=e.onReceivedMessage,i=e.socket,s=e.socketConnected,l=e.enqueueSnackbar,d=e.clearSelectConversation,j=e.loading,f=Object(O.f)(),b=me(),h=r.a.useState(""),g=Object(u.a)(h,2),v=g[0],x=g[1],m=r.a.useState(null),C=Object(u.a)(m,2),S=C[0],w=C[1],k=Object(a.useRef)(null);return r.a.useEffect((function(){return c(n.id,(function(){}),(function(){l("Erro ao carregar mensagens",{variant:"warning"}),f.push("/")})),function(){d()}}),[]),r.a.useEffect((function(){return!S&&s&&w(function(e,t,n){var a=e.channel("conversation:".concat(t));return a.join().receive("ok",(function(e){console.log("joined conversation",e)})),a.on("new_message",(function(e){n(e.message)})),a}(i,n.id,(function(e){o(e,t)}))),function(){S&&S.leave()}}),[s]),Object(Q.jsxs)("div",{className:b.root,children:[!s&&Object(Q.jsx)("div",{className:b.socketDown}),Object(Q.jsx)(D.a,{className:b.backdrop,open:j,children:Object(Q.jsx)(B.a,{color:"inherit"})}),Object(Q.jsxs)("div",{className:b.paper,children:[Object(Q.jsxs)("div",{className:b.head,children:[Object(Q.jsx)(p.b,{to:"/",children:Object(Q.jsx)(P.a,{})}),Object(Q.jsx)($,{prefix:"#/ @",children:n.title}),Object(Q.jsx)(H.a,{})]}),Object(Q.jsx)(y.a,{}),Object(Q.jsx)("div",{className:b.messages,children:j?null:s&&n&&n.messages?Object(Q.jsx)("div",{className:b.messages,children:n.messages&&n.messages.map((function(e){return Object(Q.jsx)(X,{yourName:t.name,targetName:n.title,content:e.content,direction:e.direction,time:e.time},e.id)}))}):void 0}),Object(Q.jsx)(y.a,{}),Object(Q.jsxs)("form",{className:b.inputBar,onSubmit:function(e){if(e.preventDefault(),S)if(v&&""!==v)try{S.push("send_message",{content:v})}finally{x(""),k.focus()}else l("Digite a mensagem",{variant:"warning"});else l("N\xe3o conectado ao canal",{variant:"warning"})},noValidate:!0,autoComplete:"false",children:[Object(Q.jsx)(V.a,{autoFocus:!0,inputRef:k,color:"primary",value:v,onChange:function(e){x(e.target.value)}}),Object(Q.jsx)(E.a,{"aria-label":"delete",className:b.margin,size:"small",type:"submit",children:Object(Q.jsx)(M.a,{fontSize:"default",style:{color:"#fff"}})})]})]})]})}))),Ce=Object(b.a)((function(e){return{conversation:{padding:"10px 15px",marginBottom:8,display:"grid",gridTemplateColumns:"auto 1fr",gridColumnGap:15,alignItems:"center",backgroundColor:"#4f4f4f",color:"#fff"}}}));var Se=Object(f.b)(null,(function(e){return{selectConversation:function(t){return e(function(e){return{type:ie,payload:e}}(t))}}}))((function(e){var t=e.id,n=e.conversation,a=e.selectConversation;return Ce(),Object(Q.jsx)(p.b,{to:"/conversations/".concat(t),onClick:function(){return a(n)},children:Object(Q.jsx)($,{prefix:"<".concat(t,"> conversation#/ "),children:n.title})})})),we=Object(b.a)((function(e){return{root:{overflow:"hidden",maxHeight:"100vh"},conversations:{display:"flex",flexDirection:"column"}}}));var ke=Object(f.b)((function(e){return{account:e.account,conversations:e.conversation.conversations,loading:e.conversation.loading}}),(function(e){return{fetchConversations:function(){return e(function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n,a,r,c,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ue}),e.prev=1,n=localStorage.getItem("auth_token"),e.next=5,ne.a.get(ve+"/api/conversations",{headers:{Authorization:"Bearer ".concat(n)}});case 5:if(a=e.sent,r=a.data,c=r.success,o=r.conversations,c){e.next=9;break}throw Error("could fetch conversations");case 9:t({type:de,payload:o}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.warn(e.t0),t({type:je});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){e.account;var t=e.conversations,n=e.loading,a=e.fetchConversations,c=Object(O.g)(),o=we();return r.a.useEffect((function(){a()}),[]),Object(Q.jsxs)("div",{className:o.root,children:[Object(Q.jsx)("div",{style:{height:10}}),Object(Q.jsxs)(O.c,{children:[Object(Q.jsx)(O.a,{path:"".concat(c.path,"conversations/:conversationId"),children:Object(Q.jsx)(ye,{})}),Object(Q.jsx)(O.a,{path:c.path,children:Object(Q.jsx)("div",{className:o.conversations,children:n?Object(Q.jsx)("span",{children:"loading..."}):t&&0!=t.length?t.map((function(e){return Object(Q.jsx)(Se,{id:e.id,conversation:e},e.id)})):Object(Q.jsx)("span",{children:"Nenhuma conversa..."})})})]})]})})),Ee=n(208),Ne=function(){return function(e){e({type:Oe});try{var t=function(){var e=localStorage.getItem("auth_token"),t=new xe.Socket("wss://polar-ridge-40128.herokuapp.com/socket",{params:{token:e}});return t.connect(),t}();e({type:he,payload:t})}catch(n){console.warn(n),e({type:ge})}}},Te=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexGrow:1,paddingTop:15,padding:8},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var _e=Object(f.b)((function(e){return{account:e.account}}),(function(e){return{doLogin:function(t,n,a,r){return e(function(e,t,n,a){return function(){var r=Object(ee.a)(Z.a.mark((function r(c){var o,i,s,l,u;return Z.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c({type:ae}),r.prev=1,r.next=4,ne.a.post(ve+"/api/login",{secret_code:e,password:t});case 4:if(o=r.sent,i=o.data,s=i.success,l=i.token,s){r.next=8;break}throw o;case 8:return r.next=10,ne.a.get(ve+"/api/user",{headers:{Authorization:"Bearer ".concat(l)}});case 10:(u=r.sent).data.success,c({type:re,payload:{token:l,user:u.data.user}}),n(),r.next=21;break;case 16:r.prev=16,r.t0=r.catch(1),console.warn(r.t0),c({type:ce}),a();case 21:case"end":return r.stop()}}),r,null,[[1,16]])})));return function(e){return r.apply(this,arguments)}}()}(t,n,a,r))},doAutoLogin:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ee.a)(Z.a.mark((function a(r){var c;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:ae}),a.prev=1,a.next=4,ne.a.get(ve+"/api/user",{headers:{Authorization:"Bearer ".concat(e)}});case 4:if((c=a.sent).data.success){a.next=7;break}throw Error("could not fetch user data");case 7:r({type:re,payload:{token:e,user:c.data.user}}),t(),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(1),console.warn(a.t0),r({type:ce}),n();case 16:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))},connectSocket:function(){return e(Ne())}}}))(Object(l.b)((function(e){var t=Te(),n=Object(O.f)(),a=r.a.useState(""),c=Object(u.a)(a,2),o=c[0],i=c[1],s=r.a.useState(""),l=Object(u.a)(s,2),d=l[0],j=l[1];return r.a.useEffect((function(){var t=localStorage.getItem("auth_token");t&&""!==t&&e.doAutoLogin(t,(function(){e.connectSocket(),n.push("/")}),(function(){}))}),[]),Object(Q.jsx)("div",{className:t.root,children:Object(Q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""===o||""===d?e.enqueueSnackbar("Preencha os campos",{variant:"warning"}):e.doLogin(o,d,(function(){e.connectSocket()}),(function(){e.enqueueSnackbar("Login falhou. Verifique os dados.",{variant:"error"})}))},children:[Object(Q.jsx)(D.a,{className:t.backdrop,open:e.account.loading,children:Object(Q.jsx)(B.a,{color:"inherit"})}),Object(Q.jsx)(V.a,{label:"C\xf3digo secreto",value:o,onChange:function(e){return i(e.target.value)},variant:"outlined",color:"secondary"}),Object(Q.jsx)("div",{style:{height:10}}),Object(Q.jsx)(V.a,{type:"password",value:d,onChange:function(e){return j(e.target.value)},label:"Senha",variant:"outlined",color:"secondary"}),Object(Q.jsx)("div",{style:{height:15}}),Object(Q.jsx)(Ee.a,{type:"submit",variant:"contained",color:"secondary",children:"Entrar"})]})})}))),Ie=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexGrow:1,paddingTop:15,padding:8}}}));var Re=Object(f.b)((function(e){return{account:e.account}}),(function(e){return{startConversation:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ee.a)(Z.a.mark((function a(r){var c,o,i,s,l;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"START_CONVERSATION_REQUEST"}),a.prev=1,c=localStorage.getItem("auth_token"),a.next=5,ne.a.post(ve+"/api/message",{content:"Vamos bater um lero",secret_code:e},{headers:{Authorization:"Bearer ".concat(c)}});case 5:if(o=a.sent,i=o.data,s=i.success,l=i.message,s){a.next=9;break}throw o.data;case 9:r({type:"START_CONVERSATION_SUCCESS",payload:l}),t(l.conversation_id),a.next=18;break;case 13:a.prev=13,a.t0=a.catch(1),console.warn(a.t0),r({type:"START_CONVERSATION_FAILURE"}),n();case 18:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))}}}))(Object(l.b)((function(e){e.account;var t=e.startConversation,n=e.enqueueSnackbar,a=Ie(),c=Object(O.f)(),o=r.a.useState(""),i=Object(u.a)(o,2),s=i[0],l=i[1];return Object(Q.jsx)("div",{className:a.root,children:Object(Q.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s&&""!==s?t(s,(function(e){c.push("/conversations/"+e)}),(function(){n("C\xf3digo secreto n\xe3o encontrado",{variant:"info"})})):n("Preencha o campo",{variant:"warning"})},children:[Object(Q.jsx)(V.a,{label:"C\xf3digo secreto",color:"secondary",value:s,onChange:function(e){l(e.target.value)},variant:"outlined"}),Object(Q.jsx)("div",{style:{height:15}}),Object(Q.jsx)(Ee.a,{type:"submit",variant:"contained",color:"secondary",children:"Iniciar Conversa"})]})})}))),Ae=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"row",alignItems:"baseline"},button:{},userName:{display:"flex",flexDirection:"column",justifyContent:"flex-end",textAlign:"right"}}}));var Fe=Object(f.b)((function(e){return{account:e.account}}))((function(e){var t=e.account,n=Ae();return t.logged?Object(Q.jsx)("div",{className:n.root,children:Object(Q.jsxs)("div",{className:n.userName,children:[Object(Q.jsx)("span",{style:{fontSize:"1.2em",fontWeight:500},children:t.user.name}),Object(Q.jsx)("span",{children:t.user.secretCode})]})}):Object(Q.jsx)(Ee.a,{color:"inherit",className:n.button,children:"Login"})})),Le=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"row",alignItems:"baseline"}}})),Ue="#666";var ze=Object(f.b)((function(e){return{status:e.socketConnection}}))((function(e){var t=e.status,n=Le(),a=t.connected,r=t.loading,c=r?Ue:a?"#FFCF99":Ue,o=r?"connecting...":a?"connected":"disconnected";return Object(Q.jsxs)("div",{className:n.root,children:[Object(Q.jsx)($,{color:"#FFF",style:{fontSize:"0.65em",fontWeight:100,paddingRight:5},children:"status:"}),Object(Q.jsx)($,{color:c,style:{fontSize:"0.65em",fontWeight:600},children:o})]})})),De=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexGrow:1},main:{padding:15},appBar:{zIndex:e.zIndex.drawer+1},appToolbar:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignContent:"center",padding:"3px 15px"},toolbarTitle:{display:"flex",flexDirection:"column"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,backgroundColor:"#333",color:"#fff"},drawerContainer:{overflow:"auto"},drawerHeader:Object(j.a)(Object(j.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3)},menuButton:{},hide:{display:"none"}}}));var Be=Object(f.b)((function(e){return{account:e.account}}),(function(e){return{doLogout:function(){return e({type:oe})}}}))((function(e){var t=e.account,n=Object(d.a)(e,["account"]),a=De(),c=r.a.useState(!1),o=Object(u.a)(c,2),s=o[0],l=o[1],j=function(){t.logged&&l(!0)},f=function(){l(!1)},b=function(e,t,n){return Object(Q.jsx)(p.b,{to:e,onClick:f,children:Object(Q.jsxs)(S.a,{button:!0,children:[Object(Q.jsx)(w.a,{children:n}),Object(Q.jsx)(k.a,{primary:t})]},t)})};return Object(Q.jsx)(p.a,{children:Object(Q.jsxs)("div",{className:a.root,children:[Object(Q.jsx)(i.a,{}),Object(Q.jsx)(h.a,{position:"static",className:a.appBar,children:Object(Q.jsxs)(g.a,{className:a.appToolbar,children:[t.logged&&Object(Q.jsx)(E.a,{color:"inherit","aria-label":"open drawer",onClick:j,edge:"start",className:a.menuButton,children:Object(Q.jsx)(A.a,{})}),Object(Q.jsx)(x.a,{variant:"h6",children:Object(Q.jsx)(p.b,{to:"/",children:Object(Q.jsxs)("div",{className:a.toolbarTitle,children:[Object(Q.jsx)("span",{children:"./lero.sh"}),Object(Q.jsx)(ze,{})]})})}),Object(Q.jsx)("div",{style:{flex:"1"}}),Object(Q.jsx)(Fe,{})]})}),Object(Q.jsxs)(m.a,{className:a.drawer,anchor:"left",open:s,onOpen:j,onClose:f,classes:{paper:a.drawerPaper},children:[Object(Q.jsx)("div",{className:a.drawerHeader,children:Object(Q.jsx)(E.a,{onClick:f,children:Object(Q.jsx)(L.a,{style:{color:"white"}})})}),Object(Q.jsxs)("div",{className:a.drawerContainer,children:[Object(Q.jsx)(y.a,{}),Object(Q.jsx)(C.a,{children:b("/","$conversations",Object(Q.jsx)(T.a,{style:{color:"#fff"}}))}),t.logged&&Object(Q.jsxs)(r.a.Fragment,{children:[Object(Q.jsx)(y.a,{}),Object(Q.jsx)(C.a,{children:b("/new","$start_new",Object(Q.jsx)(I.a,{style:{color:"#fff"}}))}),Object(Q.jsx)(C.a,{children:Object(Q.jsxs)(S.a,{onClick:function(){n.doLogout(),f()},button:!0,children:[Object(Q.jsx)(w.a,{children:Object(Q.jsx)(z.a,{style:{color:"#fff"}})}),Object(Q.jsx)(k.a,{primary:"$logout"})]},"logout")})]})]})]}),Object(Q.jsx)("main",{children:Object(Q.jsx)(v.a,{component:"main",className:a.main,maxWidth:"md",children:t.logged?Object(Q.jsxs)(O.c,{children:[Object(Q.jsx)(O.a,{path:"/favorite",children:Object(Q.jsx)("p",{children:"Favorite"})}),Object(Q.jsx)(O.a,{path:"/archived",children:Object(Q.jsx)("p",{children:"Archived"})}),Object(Q.jsx)(O.a,{path:"/new",children:Object(Q.jsx)(Re,{})}),Object(Q.jsx)(O.a,{path:"/",children:Object(Q.jsx)(ke,{})})]}):Object(Q.jsx)(_e,{})})})]})})})),Ge=n(65),He=n(104),Ve=Object(He.a)({palette:{primary:{main:"#7d130c"},secondary:{main:"#FFCF99"},error:{main:Ge.a.A400},background:{default:"#1E1E24"},text:{primary:"#FFF8F0",secondary:"#e6e6e6"}},typography:{fontFamily:"SourceCodePro, RetroGaming, VCRMono, monospace"}}),We=n(42),Me=n(102),qe={logged:!1,user:null,token:"",loading:!1};var Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case ae:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case re:var n=t.payload,a=n.token,r=n.user;return localStorage.setItem("auth_token",a),Object(j.a)(Object(j.a)({},e),{},{loading:!1,token:a,user:r,logged:!0});case ce:case oe:return localStorage.removeItem("auth_token"),qe;default:return e}},Qe=n(105),Ke=n(103),$e=n.n(Ke),Je={conversations:[{id:1,title:"Hello world",messages:[{id:1,content:"Hello",direction:"out"},{id:2,content:"Hi there",direction:"in"}]}],currentConversation:{},loading:!1};function Xe(e){return $e.a.orderBy(e,"time","desc")}var Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case de:return Object(j.a)(Object(j.a)({},e),{},{conversations:t.payload,loading:!1});case je:return Object(j.a)(Object(j.a)({},e),{},{conversations:[],loading:!1});case fe:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case be:var n=t.payload,a=n.conversation,r=n.messages;return Object(j.a)(Object(j.a)({},e),{},{loading:!1,currentConversation:Object(j.a)(Object(j.a)({},a),{},{messages:Xe(r)})});case pe:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,currentConversation:Object(j.a)(Object(j.a)({},e.currentConversation),{},{messages:[]})});case le:if(e.currentConversation.id){var c=[].concat(Object(Qe.a)(e.currentConversation.messages),[t.payload]);return Object(j.a)(Object(j.a)({},e),{},{currentConversation:Object(j.a)(Object(j.a)({},e.currentConversation),{},{messages:Xe(c)})})}return e;case ie:return Object(j.a)(Object(j.a)({},e),{},{currentConversation:t.payload});case se:return Object(j.a)(Object(j.a)({},e),{},{currentConversation:{}});case oe:return Je;default:return e}},Ze={connected:!1,loading:!1,socket:null};var et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return Object(j.a)(Object(j.a)({},e),{},{loading:!0,connected:!1});case he:return{connected:!0,loading:!1,socket:t.payload};case ge:case oe:return Ze;default:return e}},tt=Object(We.c)({account:Pe,conversation:Ye,socketConnection:et});var nt=function(e){var t=[Me.a],n=[We.a.apply(void 0,t)],a=We.d.apply(void 0,n);return Object(We.e)(tt,e,a)}(),at=function(){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js").then((function(e){})).catch((function(e){}))}))};at(),o.a.render(Object(Q.jsxs)(s.a,{theme:Ve,children:[Object(Q.jsx)(i.a,{}),Object(Q.jsx)(f.a,{store:nt,children:Object(Q.jsx)(l.a,{maxSnack:3,children:Object(Q.jsx)(Be,{})})})]}),document.querySelector("#root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.ed14834f.chunk.js.map