(this["webpackJsonplero-app"]=this["webpackJsonplero-app"]||[]).push([[0],{158:function(e,t,n){"use strict";n.r(t),n.d(t,"registerServiceWorker",(function(){return jt}));var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=n(212),s=n(216),l=n(40),u=n(31),d=n(106),j=n(7),f=n(16),b=n(203),p=n(34),O=n(12),v=n(213),h=n(214),g=n(215),x=n(66),m=n(219),y=n(205),C=n(206),S=n(209),w=n(210),k=n(211),N=n(207),E=n(100),T=n.n(E),_=n(101),I=n.n(_),R=n(98),A=n.n(R),F=n(99),L=n.n(F),U=n(102),D=n.n(U),z=n(220),V=n(204),B=(n(131),n(96)),G=n.n(B),H=n(217),W=n(97),M=n.n(W),q=n(95),P=n.n(q),Q=n(2),J=Object(b.a)((function(e){return{terminal:{fontFamily:"VCRMono",fontWeight:100,fontSize:16}}}));function K(e){var t=e.prefix,n=e.color,a=e.children,r=e.style,o=void 0===r?{}:r,c=J();return Object(Q.jsxs)("span",{className:c.terminal,style:Object(j.a)(Object(j.a)({},o),{},{color:n||"#fff"}),children:[t,a]})}var X=Object(b.a)((function(e){return{line:{marginBottom:4,marginTop:4,display:"grid",alignItems:"flex-start",overflowWrap:"anywhere",gridGap:10},bubble:{gridArea:"bubble",color:"#fff"},name:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gridArea:"name",overflowWrap:"anywhere"},none:{gridArea:"none"}}}));var Y,Z,$=function(e){var t=e.yourName,n=e.targetName,a=e.content,r=e.time,o=e.direction,c=X(),i="out"===o,s=i?"#b55f5f":"#b58f5f",l=r.toString().substr(10);return Object(Q.jsxs)("div",{className:c.line,style:i?{gridTemplateAreas:'"none bubble name"',gridTemplateColumns:"auto minmax(min-content, 100%) auto",textAlign:"right"}:{gridTemplateAreas:'"name bubble none"',gridTemplateColumns:"auto minmax(min-content, 100%) auto",textAlign:"left"},children:[Object(Q.jsx)("div",{className:c.bubble,children:Object(Q.jsx)(K,{style:{fontWeight:100},children:a})}),Object(Q.jsxs)("div",{className:c.name,children:[Object(Q.jsx)(K,{color:s,style:{fontWeight:500},children:i?"@"+t:"@"+n}),Object(Q.jsx)(K,{color:s,style:{fontSize:"0.8em"},children:l})]}),Object(Q.jsx)("span",{className:c.none})]})},ee=n(26),te=n.n(ee),ne=n(46),ae=n(43),re=n.n(ae),oe="LOGIN_REQUEST",ce="LOGIN_SUCCESS",ie="LOGIN_FAILURE",se="LOGOUT",le="SELECT_CONVERSATION",ue="CLEAR_SELECT_CONVERSATION",de="CONVERSATION_RECEIVED_MESSAGE",je="ON_NEW_CONVERSATION",fe="ON_UPD_CONVERSATION",be="FETCH_CONVERSATION_REQUEST",pe="FETCH_CONVERSATION_SUCCESS",Oe="FETCH_CONVERSATION_FAILURE",ve="FETCH_CURRENT_MESSAGES_REQUEST",he="FETCH_CURRENT_MESSAGES_SUCCESS",ge="FETCH_CURRENT_MESSAGES_FAILURE",xe="SOCKET_REQUEST",me="SOCKET_CONNECT",ye="SOCKET_FAILURE",Ce="https://polar-ridge-40128.herokuapp.com",Se=function(e){return{type:le,payload:e}},we=n(94),ke=function(){Z&&(Z.leave(500).receive("ok",(function(){return console.log("left channel conversation")})),Z=null)},Ne=function(){Y&&(Y.leave(500).receive("ok",(function(){return console.log("left channel conversation")})),Y=null)},Ee=Object(b.a)((function(e){return{root:{flexGrow:0,position:"relative"},socketDown:{width:"100%",height:"100%",background:"#00000055",position:"absolute"},head:{paddingBottom:8,paddingLeft:5,paddingRight:5,display:"grid",gridTemplateColumns:"auto 1fr auto",gridColumnGap:15,alignItems:"center",textAlign:"right"},paper:{padding:"10px 15px",color:"#fff",display:"grid",gridTemplateRows:"55px 10px 55vh 10px 40px"},messages:{display:"flex",flexDirection:"column-reverse",overflowX:"hidden",overflowY:"overlay",paddingRight:20,paddingBottom:5},inputBar:{display:"grid",gridTemplateColumns:"1fr 40px",alignItems:"center",paddingTop:5,paddingBottom:5},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var Te=Object(f.b)((function(e){return{currentUser:e.account.user,conversation:e.conversation.currentConversation,loading:e.conversation.loading,socket:e.socketConnection.socket,socketConnected:e.socketConnection.connected}}),(function(e){return{onReceivedMessage:function(t,n){return e(function(e,t){return{type:de,payload:{id:e.id,content:e.content,time:e.time,direction:e.user_id===t.id?"out":"in"}}}(t,n))},clearSelectConversation:function(){return e({type:ue})},fetchCurrentMessages:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ne.a)(te.a.mark((function a(r){var o,c;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:ve}),a.prev=1,o=localStorage.getItem("auth_token"),a.next=5,re.a.get(Ce+"/api/conversations/".concat(e,"/messages"),{headers:{Authorization:"Bearer ".concat(o)}});case 5:if((c=a.sent).data.success){a.next=9;break}throw c.data;case 9:r({type:he,payload:c.data}),t(),a.next=18;break;case 13:a.prev=13,a.t0=a.catch(1),console.warn(a.t0),r({type:ge}),n();case 18:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))}}}))(Object(l.b)((function(e){var t=e.currentUser,n=e.conversation,o=e.fetchCurrentMessages,c=e.onReceivedMessage,i=e.socket,s=e.socketConnected,l=e.enqueueSnackbar,d=e.clearSelectConversation,j=e.loading,f=Object(O.f)(),b=Ee(),v=r.a.useState(""),h=Object(u.a)(v,2),g=h[0],x=h[1],m=r.a.useState(!1),C=Object(u.a)(m,2),S=C[0],w=C[1],k=Object(a.useRef)(null);return r.a.useEffect((function(){return o(n.id,(function(){}),(function(){l("Erro ao carregar mensagens",{variant:"warning"}),f.push("/")})),function(){ke(),d()}}),[]),r.a.useEffect((function(){if(!S&&s)try{console.log("using effect to JOINCONVERSATION"),function(e,t,n){Z&&ke(),(Z=e.channel("conversation:".concat(t))).join().receive("ok",(function(e){console.log("joined conversation",e)})),Z.on("new_message",(function(e){n(e.message)}))}(i,n.id,(function(e){c(e,t)})),w(!0)}catch(e){console.warn(e),w(!1)}}),[s]),Object(Q.jsxs)("div",{className:b.root,children:[!s&&Object(Q.jsx)("div",{className:b.socketDown}),Object(Q.jsx)(z.a,{className:b.backdrop,open:j,children:Object(Q.jsx)(V.a,{color:"inherit"})}),Object(Q.jsxs)("div",{className:b.paper,children:[Object(Q.jsxs)("div",{className:b.head,children:[Object(Q.jsx)(p.b,{to:"/",children:Object(Q.jsx)(P.a,{})}),Object(Q.jsx)(K,{prefix:"#/ @",children:n.title}),Object(Q.jsx)(G.a,{})]}),Object(Q.jsx)(y.a,{}),Object(Q.jsx)("div",{className:b.messages,children:j?null:s&&n&&n.messages?Object(Q.jsx)("div",{className:b.messages,children:n.messages&&n.messages.map((function(e){return Object(Q.jsx)($,{yourName:t.name,targetName:n.title,content:e.content,direction:e.direction,time:e.time},e.id)}))}):void 0}),Object(Q.jsx)(y.a,{}),Object(Q.jsxs)("form",{className:b.inputBar,onSubmit:function(e){if(e.preventDefault(),S)if(g&&""!==g)try{!function(e){Z||console.warn("tried to send message disconnected from conversationChannel (sendMessage)"),Z.push("send_message",{content:e})}(g)}finally{x(""),k.current.focus()}else l("Digite a mensagem",{variant:"warning"});else l("N\xe3o conectado ao canal",{variant:"warning"})},noValidate:!0,autoComplete:"false",children:[Object(Q.jsx)(H.a,{autoFocus:!0,inputRef:k,color:"primary",value:g,onChange:function(e){x(e.target.value)}}),Object(Q.jsx)(N.a,{"aria-label":"delete",className:b.margin,size:"small",type:"submit",children:Object(Q.jsx)(M.a,{fontSize:"default",style:{color:"#fff"}})})]})]})]})}))),_e=Object(b.a)((function(e){return{conversation:{padding:"10px 15px",marginBottom:8,display:"grid",gridTemplateColumns:"auto 1fr",gridColumnGap:15,alignItems:"center",backgroundColor:"#4f4f4f",color:"#fff"}}}));var Ie=Object(f.b)(null,(function(e){return{selectConversation:function(t){return e(Se(t))}}}))((function(e){var t=e.id,n=e.conversation,a=e.selectConversation;return _e(),Object(Q.jsxs)(p.b,{to:"/conversations/".concat(t),onClick:function(){return a(n)},children:[Object(Q.jsx)(K,{prefix:"<".concat(t,"> conversation#/ "),children:n.title}),n.updated&&Object(Q.jsx)(K,{prefix:" ",color:"red",children:"<!!>"})]})})),Re=Object(b.a)((function(e){return{root:{overflow:"hidden",maxHeight:"100vh"},conversations:{display:"flex",flexDirection:"column"}}}));var Ae=Object(f.b)((function(e){return{account:e.account,conversations:e.conversation.conversations,loading:e.conversation.loading}}),(function(e){return{fetchConversations:function(){return e(function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,a,r,o,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:be}),e.prev=1,n=localStorage.getItem("auth_token"),e.next=5,re.a.get(Ce+"/api/conversations",{headers:{Authorization:"Bearer ".concat(n)}});case 5:if(a=e.sent,r=a.data,o=r.success,c=r.conversations,o){e.next=9;break}throw Error("could fetch conversations");case 9:t({type:pe,payload:c}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.warn(e.t0),t({type:Oe});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){e.account;var t=e.conversations,n=e.loading,a=e.fetchConversations,o=Object(O.g)(),c=Re();return r.a.useEffect((function(){a()}),[]),Object(Q.jsxs)("div",{className:c.root,children:[Object(Q.jsx)("div",{style:{height:10}}),Object(Q.jsxs)(O.c,{children:[Object(Q.jsx)(O.a,{path:"".concat(o.path,"conversations/:conversationId"),children:Object(Q.jsx)(Te,{})}),Object(Q.jsx)(O.a,{path:o.path,children:Object(Q.jsx)("div",{className:c.conversations,children:n?Object(Q.jsx)("span",{children:"loading..."}):t&&0!=t.length?t.map((function(e){return Object(Q.jsx)(Ie,{id:e.id,conversation:e},e.id)})):Object(Q.jsx)("span",{children:"Nenhuma conversa..."})})})]})]})})),Fe=n(208),Le=function(e,t,n){return function(e){e({type:xe});try{var a=function(){var e=localStorage.getItem("auth_token"),t=new we.Socket("wss://polar-ridge-40128.herokuapp.com/socket",{params:{token:e}});return t.connect(),t}();!function(e,t,n,a){Y&&Ne(),(Y=e.channel("conversation:lobby")).join().receive("ok",(function(e){console.log("joined user channel",e)})),Y.on("new_conversation",(function(e){n(e.conversation)})),Y.on("upd_conversation",(function(e){a(e.conversation)}))}(a,0,t,n),e({type:me,payload:a})}catch(r){console.warn(r),e({type:ye})}}},Ue=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexGrow:1,paddingTop:15,padding:8},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var De=Object(f.b)((function(e){return{account:e.account}}),(function(e){return{doLogin:function(t,n,a,r){return e(function(e,t,n,a){return function(){var r=Object(ne.a)(te.a.mark((function r(o){var c,i,s,l,u;return te.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o({type:oe}),r.prev=1,r.next=4,re.a.post(Ce+"/api/login",{secret_code:e,password:t});case 4:if(c=r.sent,i=c.data,s=i.success,l=i.token,s){r.next=8;break}throw c;case 8:return r.next=10,re.a.get(Ce+"/api/user",{headers:{Authorization:"Bearer ".concat(l)}});case 10:(u=r.sent).data.success,o({type:ce,payload:{token:l,user:u.data.user}}),n(u.data.user),r.next=21;break;case 16:r.prev=16,r.t0=r.catch(1),console.warn(r.t0),o({type:ie}),a();case 21:case"end":return r.stop()}}),r,null,[[1,16]])})));return function(e){return r.apply(this,arguments)}}()}(t,n,a,r))},doAutoLogin:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ne.a)(te.a.mark((function a(r){var o;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:oe}),a.prev=1,a.next=4,re.a.get(Ce+"/api/user",{headers:{Authorization:"Bearer ".concat(e)}});case 4:if((o=a.sent).data.success){a.next=7;break}throw Error("could not fetch user data");case 7:r({type:ce,payload:{token:e,user:o.data.user}}),t(o.data.user),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(1),console.warn(a.t0),r({type:ie}),n();case 16:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))},connectSocket:function(t,n,a){return e(Le(0,n,a))},addConversation:function(t){return e(function(e){return{type:je,payload:e}}(t))},updateConversation:function(t){return e(function(e){return{type:fe,payload:e}}(t))}}}))(Object(l.b)((function(e){var t=Ue(),n=Object(O.f)(),a=r.a.useState(""),o=Object(u.a)(a,2),c=o[0],i=o[1],s=r.a.useState(""),l=Object(u.a)(s,2),d=l[0],j=l[1];return r.a.useEffect((function(){var t=localStorage.getItem("auth_token");t&&""!==t&&e.doAutoLogin(t,(function(t){e.connectSocket(t.id,e.addConversation,e.updateConversation),n.push("/")}),(function(){}))}),[]),Object(Q.jsx)("div",{className:t.root,children:Object(Q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""===c||""===d?e.enqueueSnackbar("Preencha os campos",{variant:"warning"}):e.doLogin(c,d,(function(t){e.connectSocket(t.id,e.addConversation,e.updateConversation)}),(function(){e.enqueueSnackbar("Login falhou. Verifique os dados.",{variant:"error"})}))},autoComplete:"no",children:[Object(Q.jsx)(z.a,{className:t.backdrop,open:e.account.loading,children:Object(Q.jsx)(V.a,{color:"inherit"})}),Object(Q.jsx)(H.a,{label:"C\xf3digo secreto",value:c,onChange:function(e){return i(e.target.value)},variant:"outlined",color:"secondary",autoComplete:"no"}),Object(Q.jsx)("div",{style:{height:10}}),Object(Q.jsx)(H.a,{type:"password",value:d,onChange:function(e){return j(e.target.value)},label:"Senha",variant:"outlined",color:"secondary",autoComplete:"new-password"}),Object(Q.jsx)("div",{style:{height:15}}),Object(Q.jsx)(Fe.a,{type:"submit",variant:"contained",color:"secondary",children:"Entrar"})]})})}))),ze=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexGrow:1,paddingTop:15,padding:8}}}));var Ve=Object(f.b)((function(e){return{account:e.account}}),(function(e){return{startConversation:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ne.a)(te.a.mark((function a(r){var o,c,i,s,l;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"START_CONVERSATION_REQUEST"}),a.prev=1,o=localStorage.getItem("auth_token"),a.next=5,re.a.post(Ce+"/api/message",{content:"Vamos bater um lero",secret_code:e},{headers:{Authorization:"Bearer ".concat(o)}});case 5:if(c=a.sent,i=c.data,s=i.success,l=i.message,s){a.next=9;break}throw c.data;case 9:r({type:"START_CONVERSATION_SUCCESS",payload:l}),t(l.conversation_id),a.next=18;break;case 13:a.prev=13,a.t0=a.catch(1),console.warn(a.t0),r({type:"START_CONVERSATION_FAILURE"}),n();case 18:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))},selectConversation:function(t){return e(Se(t))}}}))(Object(l.b)((function(e){e.account;var t=e.startConversation,n=e.enqueueSnackbar,a=e.selectConversation,o=ze(),c=Object(O.f)(),i=r.a.useState(""),s=Object(u.a)(i,2),l=s[0],d=s[1];return Object(Q.jsx)("div",{className:o.root,children:Object(Q.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l&&""!==l?t(l,(function(e){a({id:e,title:l}),c.push("/conversations/"+e)}),(function(){n("C\xf3digo secreto n\xe3o encontrado",{variant:"info"})})):n("Preencha o campo",{variant:"warning"})},children:[Object(Q.jsx)(H.a,{label:"C\xf3digo secreto",color:"secondary",value:l,onChange:function(e){d(e.target.value)},variant:"outlined"}),Object(Q.jsx)("div",{style:{height:15}}),Object(Q.jsx)(Fe.a,{type:"submit",variant:"contained",color:"secondary",children:"Iniciar Conversa"})]})})}))),Be=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"row",alignItems:"baseline"},button:{},userName:{display:"flex",flexDirection:"column",justifyContent:"flex-end",textAlign:"right"}}}));var Ge=Object(f.b)((function(e){return{account:e.account}}))((function(e){var t=e.account,n=Be();return t.logged?Object(Q.jsx)("div",{className:n.root,children:Object(Q.jsxs)("div",{className:n.userName,children:[Object(Q.jsx)("span",{style:{fontSize:"1.2em",fontWeight:500},children:t.user.name}),Object(Q.jsx)("span",{children:t.user.secretCode})]})}):Object(Q.jsx)(Fe.a,{color:"inherit",className:n.button,children:"Login"})})),He=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"row",alignItems:"baseline"}}})),We="#666";var Me=Object(f.b)((function(e){return{status:e.socketConnection}}))((function(e){var t=e.status,n=He(),a=t.connected,r=t.loading,o=r?We:a?"#FFCF99":We,c=r?"connecting...":a?"connected":"disconnected";return Object(Q.jsxs)("div",{className:n.root,children:[Object(Q.jsx)(K,{color:"#FFF",style:{fontSize:"0.65em",fontWeight:100,paddingRight:5},children:"status:"}),Object(Q.jsx)(K,{color:o,style:{fontSize:"0.65em",fontWeight:600},children:c})]})})),qe=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexGrow:1},main:{padding:15},appBar:{zIndex:e.zIndex.drawer+1},appToolbar:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignContent:"center",padding:"3px 15px"},toolbarTitle:{display:"flex",flexDirection:"column"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,backgroundColor:"#333",color:"#fff"},drawerContainer:{overflow:"auto"},drawerHeader:Object(j.a)(Object(j.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3)},menuButton:{},hide:{display:"none"}}}));var Pe=Object(f.b)((function(e){return{account:e.account}}),(function(e){return{doLogout:function(){return e({type:se})}}}))((function(e){var t=e.account,n=Object(d.a)(e,["account"]),a=qe(),o=r.a.useState(!1),c=Object(u.a)(o,2),s=c[0],l=c[1],j=function(){t.logged&&l(!0)},f=function(){l(!1)},b=function(e,t,n){return Object(Q.jsx)(p.b,{to:e,onClick:f,children:Object(Q.jsxs)(S.a,{button:!0,children:[Object(Q.jsx)(w.a,{children:n}),Object(Q.jsx)(k.a,{primary:t})]},t)})};return Object(Q.jsx)(p.a,{children:Object(Q.jsxs)("div",{className:a.root,children:[Object(Q.jsx)(i.a,{}),Object(Q.jsx)(v.a,{position:"static",className:a.appBar,children:Object(Q.jsxs)(h.a,{className:a.appToolbar,children:[t.logged&&Object(Q.jsx)(N.a,{color:"inherit","aria-label":"open drawer",onClick:j,edge:"start",className:a.menuButton,children:Object(Q.jsx)(A.a,{})}),Object(Q.jsx)(x.a,{variant:"h6",children:Object(Q.jsx)(p.b,{to:"/",children:Object(Q.jsxs)("div",{className:a.toolbarTitle,children:[Object(Q.jsx)("span",{children:"Lero"}),Object(Q.jsx)(Me,{})]})})}),Object(Q.jsx)("div",{style:{flex:"1"}}),Object(Q.jsx)(Ge,{})]})}),Object(Q.jsxs)(m.a,{className:a.drawer,anchor:"left",open:s,onOpen:j,onClose:f,classes:{paper:a.drawerPaper},children:[Object(Q.jsx)("div",{className:a.drawerHeader,children:Object(Q.jsx)(N.a,{onClick:f,children:Object(Q.jsx)(L.a,{style:{color:"white"}})})}),Object(Q.jsxs)("div",{className:a.drawerContainer,children:[Object(Q.jsx)(y.a,{}),Object(Q.jsx)(C.a,{children:b("/","/conversations",Object(Q.jsx)(T.a,{style:{color:"#fff"}}))}),t.logged&&Object(Q.jsxs)(r.a.Fragment,{children:[Object(Q.jsx)(y.a,{}),Object(Q.jsx)(C.a,{children:b("/new","/start_new",Object(Q.jsx)(I.a,{style:{color:"#fff"}}))}),Object(Q.jsx)(C.a,{children:Object(Q.jsxs)(S.a,{onClick:function(){n.doLogout(),f()},button:!0,children:[Object(Q.jsx)(w.a,{children:Object(Q.jsx)(D.a,{style:{color:"#fff"}})}),Object(Q.jsx)(k.a,{primary:"/logout"})]},"logout")})]})]})]}),Object(Q.jsx)("main",{children:Object(Q.jsx)(g.a,{component:"main",className:a.main,maxWidth:"md",children:t.logged?Object(Q.jsxs)(O.c,{children:[Object(Q.jsx)(O.a,{path:"/favorite",children:Object(Q.jsx)("p",{children:"Favorite"})}),Object(Q.jsx)(O.a,{path:"/archived",children:Object(Q.jsx)("p",{children:"Archived"})}),Object(Q.jsx)(O.a,{path:"/new",children:Object(Q.jsx)(Ve,{})}),Object(Q.jsx)(O.a,{path:"/",children:Object(Q.jsx)(Ae,{})})]}):Object(Q.jsx)(De,{})})})]})})})),Qe=n(65),Je=n(105),Ke=Object(Je.a)({palette:{primary:{main:"#7d130c"},secondary:{main:"#FFCF99"},error:{main:Qe.a.A400},background:{default:"#1E1E24"},text:{primary:"#FFF8F0",secondary:"#e6e6e6"}},typography:{fontFamily:"SourceCodePro, RetroGaming, VCRMono, monospace"}}),Xe=n(42),Ye=n(103),Ze={logged:!1,user:null,token:"",loading:!1};var $e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case oe:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case ce:var n=t.payload,a=n.token,r=n.user;return localStorage.setItem("auth_token",a),Object(j.a)(Object(j.a)({},e),{},{loading:!1,token:a,user:r,logged:!0});case ie:case se:return localStorage.removeItem("auth_token"),Ze;default:return e}},et=n(74),tt=n(104),nt=n.n(tt),at={conversations:[{id:1,title:"Hello world",messages:[{id:1,content:"Hello",direction:"out"},{id:2,content:"Hi there",direction:"in"}]}],currentConversation:{},loading:!1};function rt(e){return nt.a.orderBy(e,"time","desc")}function ot(e,t){return e.conversations.map((function(e){return e.id!==t?e:Object(j.a)(Object(j.a)({},e),{},{updated:!1})}))}function ct(e,t){return e.conversations.map((function(n){return n.id===t.id&&e.currentConversation.id!=t.id?Object(j.a)(Object(j.a)({},t),{},{updated:!0}):n}))}var it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case pe:return Object(j.a)(Object(j.a)({},e),{},{conversations:t.payload,loading:!1});case Oe:return Object(j.a)(Object(j.a)({},e),{},{conversations:[],loading:!1});case ve:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case he:var n=t.payload,a=n.conversation,r=n.messages;return Object(j.a)(Object(j.a)({},e),{},{loading:!1,currentConversation:Object(j.a)(Object(j.a)({},a),{},{messages:rt(r)})});case ge:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,currentConversation:Object(j.a)(Object(j.a)({},e.currentConversation),{},{messages:[]})});case je:return Object(j.a)(Object(j.a)({},e),{},{conversations:[].concat(Object(et.a)(e.conversations),[t.payload])});case fe:return Object(j.a)(Object(j.a)({},e),{},{conversations:ct(e,t.payload)});case de:if(e.currentConversation.id){var o=[].concat(Object(et.a)(e.currentConversation.messages),[t.payload]);return Object(j.a)(Object(j.a)({},e),{},{currentConversation:Object(j.a)(Object(j.a)({},e.currentConversation),{},{messages:rt(o)})})}return e;case le:return Object(j.a)(Object(j.a)({},e),{},{conversations:ot(e,t.payload.id),currentConversation:t.payload});case ue:return Object(j.a)(Object(j.a)({},e),{},{currentConversation:{}});case se:return at;default:return e}},st={user:null,connected:!1,loading:!1,socket:null};var lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(j.a)(Object(j.a)({},e),{},{user:t.payload.user});case ie:return Object(j.a)(Object(j.a)({},e),{},{user:null});case xe:return Object(j.a)(Object(j.a)({},e),{},{loading:!0,connected:!1});case me:return{connected:!0,loading:!1,socket:t.payload};case ye:return Ne(),st;case se:return Ne(),e.socket&&e.socket.disconnect((function(){return console.log("socket disconnected")})),st;default:return e}},ut=Object(Xe.c)({account:$e,conversation:it,socketConnection:lt});var dt=function(e){var t=[Ye.a],n=[Xe.a.apply(void 0,t)],a=Xe.d.apply(void 0,n);return Object(Xe.e)(ut,e,a)}(),jt=function(){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js").then((function(e){})).catch((function(e){}))}))};jt(),c.a.render(Object(Q.jsxs)(s.a,{theme:Ke,children:[Object(Q.jsx)(i.a,{}),Object(Q.jsx)(f.a,{store:dt,children:Object(Q.jsx)(l.a,{maxSnack:3,children:Object(Q.jsx)(Pe,{})})})]}),document.querySelector("#root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.fdf7dce4.chunk.js.map