{"version":3,"sources":["components/TerminalText.js","components/MessageBubble.js","socket.js","store/actionTypes.js","consts.js","store/actions/conversationActions.js","screens/Conversation.js","components/ConversationCard.js","screens/ConversationRouter.js","store/actions/socketActions.js","screens/LoginScreen.js","store/actions/accountActions.js","screens/NewConversation.js","components/UserStatus.js","components/SocketStatus.js","App.js","theme.js","store/reducers/accountReducer.js","store/reducers/conversationReducer.js","store/reducers/socketReducer.js","store/reducers/index.js","index.js","store/index.js"],"names":["useStyles","makeStyles","theme","terminal","fontFamily","fontWeight","fontSize","TerminalText","prefix","color","children","style","classes","className","line","marginBottom","marginTop","display","alignItems","overflowWrap","gridGap","bubble","gridArea","name","flexDirection","justifyContent","none","MessageBubble","userChannel","conversationChannel","yourName","targetName","content","time","direction","outbound","formattedTime","toString","substr","gridTemplateAreas","gridTemplateColumns","textAlign","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","SELECT_CONVERSATION","CLEAR_SELECT_CONVERSATION","CONVERSATION_RECEIVED_MESSAGE","ON_NEW_CONVERSATION","ON_UPD_CONVERSATION","FETCH_CONVERSATION_REQUEST","FETCH_CONVERSATION_SUCCESS","FETCH_CONVERSATION_FAILURE","FETCH_CURRENT_MESSAGES_REQUEST","FETCH_CURRENT_MESSAGES_SUCCESS","FETCH_CURRENT_MESSAGES_FAILURE","SOCKET_REQUEST","SOCKET_CONNECT","SOCKET_FAILURE","BACKEND_URL","selectConversation","conversation","type","payload","leaveConversation","leave","receive","console","log","leaveUser","root","flexGrow","position","socketDown","width","height","background","head","paddingBottom","paddingLeft","paddingRight","gridColumnGap","paper","padding","gridTemplateRows","messages","overflowX","overflowY","inputBar","paddingTop","backdrop","zIndex","drawer","connect","state","currentUser","account","user","currentConversation","loading","socket","socketConnection","socketConnected","connected","dispatch","onReceivedMessage","message","id","user_id","clearSelectConversation","fetchCurrentMessages","conversationId","onSuccess","onError","a","token","localStorage","getItem","axios","get","headers","response","data","success","warn","withSnackbar","enqueueSnackbar","history","useHistory","React","useState","text","setText","channel","setChannel","messageInput","useRef","useEffect","variant","push","onReceivedMessageCallback","join","responsePayload","on","joinConversation","e","Backdrop","open","CircularProgress","to","title","Divider","map","onSubmit","preventDefault","sendMessage","current","focus","noValidate","autoComplete","TextField","autoFocus","inputRef","value","onChange","event","target","IconButton","aria-label","margin","size","backgroundColor","onClick","updated","overflow","maxHeight","conversations","fetchConversations","Error","match","useRouteMatch","path","length","convs","connectSocket","userId","onNewConversation","onUpdateConversation","Socket","params","createAndConnectSocket","joinUser","minHeight","doLogin","secretCode","password","post","loginResponse","userResponse","doAutoLogin","addConversation","updateConversation","props","setCode","setPass","label","Button","startConversation","conversation_id","button","userName","logged","ORANGE","status","main","appBar","appToolbar","alignContent","toolbarTitle","flexShrink","drawerPaper","drawerContainer","drawerHeader","spacing","mixins","toolbar","menuButton","hide","doLogout","setOpen","handleDrawerOpen","handleDrawerClose","menuLink","icon","ListItem","ListItemIcon","ListItemText","primary","CssBaseline","AppBar","Toolbar","edge","Typography","flex","SwipeableDrawer","anchor","onOpen","onClose","List","Fragment","Container","component","maxWidth","createMuiTheme","palette","secondary","error","red","A400","default","typography","INITIAL_STATE","accountReducer","action","setItem","removeItem","sortMessages","_","orderBy","clearUpdatedOnConversation","convsId","conversationReducer","socketReducer","disconnect","combineReducers","store","preloadedState","middlewares","thunkMiddleware","enhancers","applyMiddleware","composedEnhancers","compose","createStore","rootReducer","configureStore","registerServiceWorker","navigator","window","addEventListener","serviceWorker","register","then","registration","catch","err","ReactDOM","render","ThemeProvider","maxSnack","document","querySelector"],"mappings":"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","file":"static/js/main.fdf7dce4.chunk.js","sourcesContent":["import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n  terminal: {\n    fontFamily: 'VCRMono',\n    fontWeight: 100,\n    fontSize: 16\n  }\n}))\n\nexport default function TerminalText ({ prefix, color, children, style = {} }) {\n  const classes = useStyles()\n  return (\n    <span className={classes.terminal} style={{ ...style, color: color || '#fff' }}>\n      {prefix}{children}\n    </span>\n  )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport TerminalText from './TerminalText'\n\nconst useStyles = makeStyles((theme) => ({\n  line: {\n    marginBottom: 4,\n    marginTop: 4,\n    display: 'grid',\n    alignItems: 'flex-start',\n    overflowWrap: 'anywhere',\n    gridGap: 10\n  },\n  bubble: {\n    gridArea: 'bubble',\n    color: '#fff'\n  },\n  name: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    alignItems: 'flex-start',\n    gridArea: 'name',\n    overflowWrap: 'anywhere'\n  },\n  none: {\n    gridArea: 'none',\n  }\n}))\n\nfunction MessageBubble ({ yourName, targetName, content, time, direction }) {\n  const classes = useStyles()\n  const outbound = direction === 'out'\n\n  const normalStyle = {\n    gridTemplateAreas: '\"name bubble none\"',\n    gridTemplateColumns: 'auto minmax(min-content, 100%) auto',\n    textAlign: 'left'\n  }\n  const outboundStyle = {\n    gridTemplateAreas: '\"none bubble name\"',\n    gridTemplateColumns: 'auto minmax(min-content, 100%) auto',\n    textAlign: 'right'\n  }\n  const color = outbound ? '#b55f5f' : '#b58f5f'\n  const formattedTime = time.toString().substr(10)\n\n  return (\n    <div className={classes.line} style={outbound ? outboundStyle : normalStyle}>\n      <div className={classes.bubble}>\n        <TerminalText style={{ fontWeight: 100 }}>{content}</TerminalText>\n      </div>\n      <div className={classes.name}>\n        <TerminalText color={color} style={{ fontWeight: 500 }}>\n          {outbound ? '@' + yourName : '@' + targetName}\n        </TerminalText>\n        <TerminalText color={color} style={{ fontSize: '0.8em'}}>\n          {formattedTime}\n        </TerminalText>\n      </div>\n      <span className={classes.none}></span>\n    </div>\n  )\n}\n\nexport default MessageBubble\n","import { Socket } from 'phoenix';\nimport { WEBSOCKET_URL } from './consts'\n\nlet userChannel;\nlet conversationChannel;\n\nexport const createAndConnectSocket = () => {\n  const token = localStorage.getItem('auth_token')\n  const socket = new Socket(WEBSOCKET_URL, {params: {token: token}})\n  socket.connect();\n  return socket\n}\n\nexport const joinConversation = (socket, conversationId, onReceivedMessageCallback) => {\n  if (conversationChannel) leaveConversation();\n\n  conversationChannel = socket.channel(`conversation:${conversationId}`);\n  conversationChannel.join().receive('ok', (responsePayload) => {\n    console.log('joined conversation', responsePayload);\n  });\n\n  conversationChannel.on(\"new_message\", (response) => {\n    onReceivedMessageCallback(response.message)\n  })\n}\n\nexport const sendMessage = (text) => {\n  if (!conversationChannel) console.warn('tried to send message disconnected from conversationChannel (sendMessage)');\n  conversationChannel.push(\"send_message\", {content: text})\n}\n\nexport const leaveConversation = () => {\n  if (!conversationChannel) return;\n  conversationChannel.leave(500).receive(\"ok\", () => console.log(\"left channel conversation\"));\n  conversationChannel = null;\n}\n\nexport const joinUser = (socket, userId, onNewConversation, onUpdateConversation) => {\n  if (userChannel) leaveUser();\n\n  userChannel = socket.channel(`conversation:lobby`);\n  userChannel.join().receive('ok', (responsePayload) => {\n    console.log('joined user channel', responsePayload);\n  });\n\n  userChannel.on(\"new_conversation\", (response) => {\n    onNewConversation(response.conversation)\n  })\n  userChannel.on(\"upd_conversation\", (response) => {\n    onUpdateConversation(response.conversation)\n  })\n}\n\nexport const leaveUser = () => {\n  if (!userChannel) return;\n  userChannel.leave(500).receive(\"ok\", () => console.log(\"left channel conversation\"));\n  userChannel = null;\n}\n","\nexport const LOGIN_REQUEST = \"LOGIN_REQUEST\"\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\"\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\"\n\nexport const LOGOUT = \"LOGOUT\"\n\nexport const SELECT_CONVERSATION = \"SELECT_CONVERSATION\"\nexport const CLEAR_SELECT_CONVERSATION = \"CLEAR_SELECT_CONVERSATION\"\nexport const CONVERSATION_RECEIVED_MESSAGE = \"CONVERSATION_RECEIVED_MESSAGE\"\n\nexport const ON_NEW_CONVERSATION = \"ON_NEW_CONVERSATION\"\nexport const ON_UPD_CONVERSATION = \"ON_UPD_CONVERSATION\"\n\nexport const FETCH_CONVERSATION_REQUEST = \"FETCH_CONVERSATION_REQUEST\"\nexport const FETCH_CONVERSATION_SUCCESS = \"FETCH_CONVERSATION_SUCCESS\"\nexport const FETCH_CONVERSATION_FAILURE = \"FETCH_CONVERSATION_FAILURE\"\n\nexport const FETCH_CURRENT_MESSAGES_REQUEST = \"FETCH_CURRENT_MESSAGES_REQUEST\"\nexport const FETCH_CURRENT_MESSAGES_SUCCESS = \"FETCH_CURRENT_MESSAGES_SUCCESS\"\nexport const FETCH_CURRENT_MESSAGES_FAILURE = \"FETCH_CURRENT_MESSAGES_FAILURE\"\n\nexport const START_CONVERSATION_REQUEST = \"START_CONVERSATION_REQUEST\"\nexport const START_CONVERSATION_SUCCESS = \"START_CONVERSATION_SUCCESS\"\nexport const START_CONVERSATION_FAILURE = \"START_CONVERSATION_FAILURE\"\n\n\nexport const SOCKET_REQUEST = \"SOCKET_REQUEST\"\nexport const SOCKET_CONNECT = \"SOCKET_CONNECT\"\nexport const SOCKET_FAILURE = \"SOCKET_FAILURE\"\n\n","\nconst PROD = true;\n\nexport const BACKEND_URL = PROD ? \"https://polar-ridge-40128.herokuapp.com\" : \"http://localhost:4000\"\nexport const WEBSOCKET_URL = PROD ? \"wss://polar-ridge-40128.herokuapp.com/socket\" : \"ws://localhost:4000/socket\"\n","import axios from 'axios'\nimport {\n  SELECT_CONVERSATION,\n  FETCH_CONVERSATION_REQUEST,\n  FETCH_CONVERSATION_SUCCESS,\n  FETCH_CONVERSATION_FAILURE,\n  START_CONVERSATION_REQUEST,\n  START_CONVERSATION_SUCCESS,\n  START_CONVERSATION_FAILURE,\n  FETCH_CURRENT_MESSAGES_REQUEST,\n  FETCH_CURRENT_MESSAGES_SUCCESS,\n  FETCH_CURRENT_MESSAGES_FAILURE,\n  CONVERSATION_RECEIVED_MESSAGE,\n  CLEAR_SELECT_CONVERSATION,\n  ON_NEW_CONVERSATION,\n  ON_UPD_CONVERSATION,\n} from '../actionTypes'\nimport { BACKEND_URL } from '../../consts'\n\nexport const selectConversation = (conversation) => { return {type: SELECT_CONVERSATION, payload: conversation} }\n\nexport const clearSelectConversation = () => { return {type: CLEAR_SELECT_CONVERSATION } }\n\nexport const addConversation = (payload) => { return {type: ON_NEW_CONVERSATION, payload } }\n\nexport const updateConversation = (payload) => { return {type: ON_UPD_CONVERSATION, payload } }\n\nexport const onReceivedMessage = (payload, user) => {\n  return {\n    type: CONVERSATION_RECEIVED_MESSAGE,\n    payload: {\n      id: payload.id,\n      content: payload.content,\n      time: payload.time,\n      direction: payload.user_id === user.id ? 'out' : 'in'\n    }\n  }\n}\n\nexport const fetchConversations = () => async dispatch => {\n  dispatch({ type: FETCH_CONVERSATION_REQUEST})\n  try {\n    const token = localStorage.getItem('auth_token')\n\n    const response = await axios.get(BACKEND_URL + '/api/conversations', {\n      headers: { 'Authorization': `Bearer ${token}`}\n    });\n    const {success, conversations} = response.data;\n    if (!success) throw Error(\"could fetch conversations\")\n\n    dispatch({ type: FETCH_CONVERSATION_SUCCESS, payload: conversations })\n  } catch (e) {\n    console.warn(e)\n    dispatch({ type: FETCH_CONVERSATION_FAILURE })\n  }\n}\n\nexport const startConversation = (secretCode, onSuccess, onError) => async dispatch => {\n  dispatch({ type: START_CONVERSATION_REQUEST})\n  try {\n    const token = localStorage.getItem('auth_token')\n\n    const response = await axios.post(BACKEND_URL + '/api/message',\n    {\n      'content': 'Vamos bater um lero',\n      'secret_code': secretCode\n    },\n    { headers: { 'Authorization': `Bearer ${token}`} });\n    const {success, message} = response.data;\n    if (!success) throw response.data\n\n    dispatch({ type: START_CONVERSATION_SUCCESS, payload: message })\n    onSuccess(message.conversation_id)\n  } catch (e) {\n    console.warn(e)\n    dispatch({ type: START_CONVERSATION_FAILURE })\n    onError()\n  }\n}\n\nexport const fetchCurrentMessages = (conversationId, onSuccess, onError) => async dispatch => {\n  dispatch({ type: FETCH_CURRENT_MESSAGES_REQUEST})\n  try {\n    const token = localStorage.getItem('auth_token')\n\n    const response = await axios.get(BACKEND_URL + `/api/conversations/${conversationId}/messages`,\n    { headers: { 'Authorization': `Bearer ${token}`} });\n    const {success} = response.data;\n    if (!success) throw response.data\n\n    dispatch({ type: FETCH_CURRENT_MESSAGES_SUCCESS, payload: response.data })\n    onSuccess()\n  } catch (e) {\n    console.warn(e)\n    dispatch({ type: FETCH_CURRENT_MESSAGES_FAILURE })\n    onError()\n  }\n}\n","import React, { useRef } from 'react'\nimport { connect } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Link, useHistory } from \"react-router-dom\"\nimport { withSnackbar } from 'notistack'\n\nimport Backdrop from '@material-ui/core/Backdrop'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport InfiniteScroll from 'react-infinite-scroll-component'\n\nimport HttpsIcon from '@material-ui/icons/Https'\nimport Divider from '@material-ui/core/Divider'\nimport TextField from '@material-ui/core/TextField'\nimport IconButton from '@material-ui/core/IconButton'\nimport SendIcon from '@material-ui/icons/Send'\n\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\n\nimport MessageBubble from '../components/MessageBubble'\nimport TerminalText from '../components/TerminalText'\n\nimport { fetchCurrentMessages, onReceivedMessage, clearSelectConversation } from '../store/actions/conversationActions'\nimport { joinConversation, leaveConversation, sendMessage } from '../socket'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 0,\n    position: 'relative',\n  },\n  socketDown: {\n    width: '100%',\n    height: '100%',\n    background: '#00000055',\n    position: 'absolute'\n  },\n  head: {\n    paddingBottom: 8,\n    paddingLeft: 5,\n    paddingRight: 5,\n    display: 'grid',\n    gridTemplateColumns: 'auto 1fr auto',\n    gridColumnGap: 15,\n    alignItems: 'center',\n    textAlign: 'right'\n  },\n  paper: {\n    padding: '10px 15px',\n    color: '#fff',\n    display: 'grid',\n    gridTemplateRows: '55px 10px 55vh 10px 40px'\n  },\n  messages: { \n    display: 'flex',\n    flexDirection: 'column-reverse',\n    overflowX: 'hidden',\n    overflowY: 'overlay',\n    paddingRight: 20,\n    paddingBottom: 5,\n  },\n  inputBar: {\n    display: 'grid',\n    gridTemplateColumns: '1fr 40px',\n    alignItems: 'center',\n    paddingTop: 5,\n    paddingBottom: 5,\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n}))\n\nfunction Conversation ({\n  currentUser,\n  conversation,\n  fetchCurrentMessages,\n  onReceivedMessage,\n  socket,\n  socketConnected,\n  enqueueSnackbar,\n  clearSelectConversation,\n  loading\n}) {\n  let history = useHistory()\n  const classes = useStyles()\n  const [text, setText] = React.useState('')\n  const [channel, setChannel] = React.useState(false)\n  const messageInput = useRef(null)\n  const handleChange = (event) => {\n    setText(event.target.value);\n  };\n  const focusInput = () => messageInput.current.focus()\n\n  React.useEffect(() => {\n    fetchCurrentMessages(\n      conversation.id,\n      () => {},\n      () => {\n      enqueueSnackbar('Erro ao carregar mensagens', { variant: 'warning' })\n      history.push(\"/\")\n    })\n    return () => {\n      leaveConversation()\n      clearSelectConversation()\n    }\n  }, [])\n\n  React.useEffect(() => {\n    if (!channel && socketConnected) {\n      try {\n        console.log('using effect to JOINCONVERSATION')\n        joinConversation(socket, conversation.id, (message) => {\n          onReceivedMessage(message, currentUser)\n        })\n        setChannel(true)\n      } catch (e) {\n        console.warn(e)\n        setChannel(false)\n      }\n    }\n  }, [socketConnected])\n\n  const trySendMessage = (e) => {\n    e.preventDefault()\n    if (!channel) {\n      enqueueSnackbar('Não conectado ao canal', { variant: 'warning' })\n      return\n    }\n    if (!text || text === '') {\n      enqueueSnackbar('Digite a mensagem', { variant: 'warning' })\n      return\n    }\n    try {\n      sendMessage(text)\n    } finally {\n      setText('')\n      focusInput()\n    }\n  }\n\n  const renderMessages = () => {\n    if (loading) return null;\n\n    if (socketConnected && conversation && conversation.messages) {\n      return (\n        <div className={classes.messages}>\n          {conversation.messages && conversation.messages.map(message => {\n            return (\n              <MessageBubble \n                key={message.id}\n                yourName={currentUser.name}\n                targetName={conversation.title}\n                content={message.content}\n                direction={message.direction}\n                time={message.time}\n              />\n            )\n          })}\n        </div>\n      )\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      {!socketConnected && <div className={classes.socketDown}></div>}\n      <Backdrop className={classes.backdrop} open={loading}>\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n      <div className={classes.paper}>\n        <div className={classes.head}>\n          <Link to=\"/\">\n            <ArrowBackIcon />\n          </Link>\n          <TerminalText prefix=\"#/ @\">{conversation.title}</TerminalText>\n          <HttpsIcon />\n        </div>\n        <Divider />\n        <div className={classes.messages}>\n          {renderMessages()}\n        </div>\n        <Divider />\n        <form className={classes.inputBar} onSubmit={trySendMessage} noValidate autoComplete={'false'}>\n          <TextField\n            autoFocus={true}\n            inputRef={messageInput}\n            color=\"primary\"\n            value={text}\n            onChange={handleChange}\n          />\n          <IconButton aria-label=\"delete\" className={classes.margin} size=\"small\" type=\"submit\">\n            <SendIcon fontSize=\"default\" style={{ color: '#fff' }} />\n          </IconButton>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.account.user,\n    conversation: state.conversation.currentConversation,\n    loading: state.conversation.loading,\n    socket: state.socketConnection.socket,\n    socketConnected: state.socketConnection.connected,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onReceivedMessage: (message, user) => dispatch(onReceivedMessage(message, user)),\n    clearSelectConversation: () => dispatch(clearSelectConversation()),\n    fetchCurrentMessages: (conversationId, onSuccess, onError) => dispatch(fetchCurrentMessages(conversationId, onSuccess, onError))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withSnackbar(Conversation))\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Link } from \"react-router-dom\"\n\nimport TerminalText from './TerminalText'\nimport Paper from '@material-ui/core/Paper'\nimport Avatar from '@material-ui/core/Avatar'\nimport { selectConversation } from '../store/actions/conversationActions'\n\nconst useStyles = makeStyles((theme) => ({\n  conversation: {\n    padding: '10px 15px',\n    marginBottom: 8,\n    display: 'grid',\n    gridTemplateColumns: 'auto 1fr',\n    gridColumnGap: 15,\n    alignItems: 'center',\n    backgroundColor: '#4f4f4f',\n    color: '#fff'\n  }\n}))\n\nfunction ConversationCard ({ id, conversation, selectConversation }) {\n  const classes = useStyles()\n\n  return (\n    <Link to={`/conversations/${id}`} onClick={() => selectConversation(conversation)}>\n      <TerminalText prefix={`<${id}> conversation#/ `}>{conversation.title}</TerminalText>\n      {conversation.updated && (<TerminalText prefix=' ' color=\"red\">{'<!!>'}</TerminalText>)}\n    </Link>\n  )\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    selectConversation: (conversation) => dispatch(selectConversation(conversation))\n  }\n}\n\nexport default connect(null, mapDispatchToProps)(ConversationCard)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport {\n  Switch,\n  Route,\n  useRouteMatch,\n} from \"react-router-dom\";\n\nimport Conversation from './Conversation'\nimport ConversationCard from '../components/ConversationCard'\n\nimport { fetchConversations } from '../store/actions/conversationActions'\nimport { ContactSupportOutlined } from '@material-ui/icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    overflow: 'hidden',\n    maxHeight: '100vh'\n  },\n  conversations: {\n    display: 'flex',\n    flexDirection: 'column'\n  }\n}))\n\nfunction ConversationRouter ({ account, conversations, loading, fetchConversations }) {\n  let match = useRouteMatch();\n  const classes = useStyles()\n\n  React.useEffect(() => {\n    fetchConversations()\n  }, [])\n\n  const renderConversations = () => {\n    if (loading) {\n      return <span>loading...</span>\n    }\n\n    if (!conversations || conversations.length == 0) {\n      return <span>Nenhuma conversa...</span>\n    }\n\n    return conversations.map(convs => {\n      return (<ConversationCard key={convs.id} id={convs.id} conversation={convs} />)\n    })\n  }\n\n  return (\n    <div className={classes.root}>\n      <div style={{ height: 10 }} />\n      <Switch>\n        <Route path={`${match.path}conversations/:conversationId`}>\n          <Conversation />\n        </Route>\n        <Route path={match.path}>\n          <div className={classes.conversations}>\n            {renderConversations()}\n          </div>\n        </Route>\n      </Switch>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    account: state.account,\n    conversations: state.conversation.conversations,\n    loading: state.conversation.loading,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchConversations: () => dispatch(fetchConversations())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ConversationRouter)\n","import {\n  SOCKET_REQUEST,\n  SOCKET_CONNECT,\n  SOCKET_FAILURE,\n} from '../actionTypes'\nimport { createAndConnectSocket, joinUser } from '../../socket'\n\nexport const connectSocket = (userId, onNewConversation, onUpdateConversation) => dispatch => {\n  dispatch({ type: SOCKET_REQUEST })\n  try {\n    const socket = createAndConnectSocket()\n    joinUser(socket, userId, onNewConversation, onUpdateConversation)\n    dispatch({ type: SOCKET_CONNECT, payload: socket })\n  } catch (e) {\n    console.warn(e)\n    dispatch({ type: SOCKET_FAILURE })\n  }\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { withSnackbar } from 'notistack'\n\nimport Backdrop from '@material-ui/core/Backdrop'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\n\nimport { doLogin, doAutoLogin } from '../store/actions/accountActions'\nimport { addConversation, updateConversation } from '../store/actions/conversationActions'\nimport { connectSocket } from '../store/actions/socketActions'\nimport { useHistory } from 'react-router'\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    minHeight: '100vh',\n    flexGrow: 1,\n    paddingTop: 15,\n    padding: 8\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n}))\n\nfunction LoginScreen (props) {\n  const classes = useStyles()\n  const history = useHistory()\n  const [secretCode, setCode] = React.useState('');\n  const [password, setPass] = React.useState('');\n  const handleChangeCode = (event) => setCode(event.target.value)\n  const handleChangePass = (event) => setPass(event.target.value)\n\n  React.useEffect(() => {\n    const token = localStorage.getItem('auth_token');\n    if (!!token && token !== '') {\n      props.doAutoLogin(token, (user) => {\n        props.connectSocket(user.id, props.addConversation, props.updateConversation)\n        history.push(\"/\")\n      }, () => {})\n    }\n  }, [])\n\n  const tryLogin = (e) => {\n    e.preventDefault()\n    if (secretCode === '' || password === '') {\n      props.enqueueSnackbar('Preencha os campos', { variant: 'warning' })\n    } else {\n      props.doLogin(secretCode, password, (user) => {\n        props.connectSocket(user.id, props.addConversation, props.updateConversation)\n      }, () => {\n        props.enqueueSnackbar('Login falhou. Verifique os dados.', { variant: 'error' })\n      })\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <form onSubmit={tryLogin} autoComplete=\"no\">\n        <Backdrop className={classes.backdrop} open={props.account.loading}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        <TextField\n          label=\"Código secreto\"\n          value={secretCode}\n          onChange={handleChangeCode}\n          variant=\"outlined\"\n          color=\"secondary\"\n          autoComplete=\"no\"\n        />\n        <div style={{ height: 10 }} />\n        <TextField\n          type=\"password\"\n          value={password}\n          onChange={handleChangePass}\n          label=\"Senha\"\n          variant=\"outlined\"\n          color=\"secondary\"\n          autoComplete=\"new-password\"\n        />\n        <div style={{ height: 15 }} />\n        <Button type=\"submit\" variant=\"contained\" color=\"secondary\">\n          Entrar\n        </Button>\n      </form>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    account: state.account\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    doLogin: (secretCode, password, onSuccess, onError) => dispatch(doLogin(secretCode, password, onSuccess, onError)),\n    doAutoLogin: (token, onSuccess, onError) => dispatch(doAutoLogin(token, onSuccess, onError)),\n    connectSocket: (userId, onNewConversation, onUpdateConversation) => dispatch(connectSocket(userId, onNewConversation, onUpdateConversation)),\n    addConversation: (payload) => dispatch(addConversation(payload)),\n    updateConversation: (payload) => dispatch(updateConversation(payload)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withSnackbar(LoginScreen))\n","import axios from 'axios'\nimport { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILURE, LOGOUT } from '../actionTypes'\nimport { BACKEND_URL } from '../../consts'\n\nexport const doLogin = (secretCode, password, onSuccess, onError) => async dispatch => {\n  dispatch({ type: LOGIN_REQUEST})\n  try {\n    const loginResponse = await axios.post(BACKEND_URL + '/api/login', { 'secret_code': secretCode, 'password': password });\n    const {success, token} = loginResponse.data;\n    if (!success) throw loginResponse;\n\n    const userResponse = await axios.get(BACKEND_URL + '/api/user', {\n      headers: { 'Authorization': `Bearer ${token}`}\n    });\n    if (!userResponse.data.success) userResponse;\n\n    dispatch({ type: LOGIN_SUCCESS, payload: { token, user: userResponse.data.user } })\n    onSuccess(userResponse.data.user)\n  } catch (e) {\n    console.warn(e)\n    dispatch({ type: LOGIN_FAILURE })\n    onError()\n  }\n}\n\nexport const doAutoLogin = (token, onSuccess, onError) => async dispatch => {\n  dispatch({ type: LOGIN_REQUEST})\n  try {\n    const userResponse = await axios.get(BACKEND_URL + '/api/user', {\n      headers: { 'Authorization': `Bearer ${token}`}\n    });\n    if (!userResponse.data.success) throw Error(\"could not fetch user data\")\n\n    dispatch({ type: LOGIN_SUCCESS, payload: { token, user: userResponse.data.user } })\n    onSuccess(userResponse.data.user)\n  } catch (e) {\n    console.warn(e)\n    dispatch({ type: LOGIN_FAILURE })\n    onError()\n  }\n}\n\nexport const doLogout = () => { return {type: LOGOUT} }\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { withSnackbar } from 'notistack'\n\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\n\nimport { startConversation, selectConversation } from '../store/actions/conversationActions'\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    minHeight: '100vh',\n    flexGrow: 1,\n    paddingTop: 15,\n    padding: 8\n  },\n}))\n\nfunction NewConversation ({ account, startConversation, enqueueSnackbar, selectConversation }) {\n  const classes = useStyles()\n  const history = useHistory()\n  const [secretCode, setText] = React.useState('');\n  const handleChange = (event) => {\n    setText(event.target.value);\n  };\n\n  const tryStartConversation = (e) => {\n    e.preventDefault();\n    if (secretCode && secretCode !== '') {\n      startConversation(secretCode, (conversationId) => {\n        selectConversation({ id: conversationId, title: secretCode })\n        history.push(\"/conversations/\" + conversationId)\n      }, () => {\n        enqueueSnackbar('Código secreto não encontrado', { variant: 'info' })\n      })\n    } else {\n      enqueueSnackbar('Preencha o campo', { variant: 'warning' })\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <form onSubmit={tryStartConversation}>\n        <TextField\n          label=\"Código secreto\"\n          color=\"secondary\"\n          value={secretCode}\n          onChange={handleChange}\n          variant=\"outlined\"\n        />\n        <div style={{ height: 15 }} />\n        <Button type=\"submit\" variant=\"contained\" color=\"secondary\">\n          Iniciar Conversa\n        </Button>\n      </form>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    account: state.account\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    startConversation: (secretCode, onSuccess, onError) => dispatch(startConversation(secretCode, onSuccess, onError)),\n    selectConversation: (conversation) => dispatch(selectConversation(conversation))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withSnackbar(NewConversation))\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport Button from '@material-ui/core/Button'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'baseline'\n  },\n  button: {},\n  userName: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-end',\n    textAlign: 'right'\n  }\n}))\n\nfunction UserStatus ({ account }) {\n  const classes = useStyles()\n\n  if (account.logged) {\n    return (\n      <div className={classes.root}>\n        <div className={classes.userName}>\n          <span style={{ fontSize: '1.2em', fontWeight: 500 }}>{account.user.name}</span>\n          <span>{account.user.secretCode}</span>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <Button color=\"inherit\" className={classes.button}>\n      Login\n    </Button>\n  )\n  \n}\n\nconst mapStateToProps = state => {\n  return {\n    account: state.account\n  }\n}\n\nexport default connect(mapStateToProps)(UserStatus)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport TerminalText from './TerminalText'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'baseline',\n  },\n}))\n\nconst GREEN = \"#FFCF99\"\nconst ORANGE = \"#666\"\n\nfunction SocketStatus ({ status }) {\n  const classes = useStyles()\n  const { connected, loading } = status\n  const color = loading ? ORANGE : (connected ? GREEN : ORANGE)\n  const text = loading ? 'connecting...' : (connected ? 'connected' : 'disconnected')\n\n  return (\n    <div className={classes.root}>\n      <TerminalText color='#FFF' style={{ fontSize: '0.65em', fontWeight: 100, paddingRight: 5 }}> \n        status: \n      </TerminalText>\n      <TerminalText color={color} style={{ fontSize: '0.65em', fontWeight: 600 }}> \n        {text}\n      </TerminalText>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    status: state.socketConnection\n  }\n}\n\nexport default connect(mapStateToProps)(SocketStatus)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { makeStyles } from '@material-ui/core/styles'\nimport CssBaseline from '@material-ui/core/CssBaseline'\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n} from \"react-router-dom\";\n\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Container from '@material-ui/core/Container'\nimport Typography from '@material-ui/core/Typography'\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer'\nimport Divider from '@material-ui/core/Divider'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport IconButton from '@material-ui/core/IconButton'\n\nimport StarIcon from '@material-ui/icons/Star'\nimport ArchiveIcon from '@material-ui/icons/Archive'\nimport ForumIcon from '@material-ui/icons/Forum'\nimport CreateIcon from '@material-ui/icons/Create'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft'\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\n\nimport ConversationRouter from './screens/ConversationRouter'\nimport LoginScreen from './screens/LoginScreen'\nimport NewConversation from './screens/NewConversation'\nimport UserStatus from './components/UserStatus'\nimport SocketStatus from './components/SocketStatus'\n\nimport { doLogout } from './store/actions/accountActions'\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    minHeight: '100vh',\n    flexGrow: 1,\n  },\n  main: {\n    padding: 15,\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  appToolbar: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'flex-start',\n    alignContent: 'center',\n    padding: '3px 15px'\n  },\n  toolbarTitle: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n    backgroundColor: '#333',\n    color: '#fff'\n  },\n  drawerContainer: {\n    overflow: 'auto',\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n  menuButton: {\n  },\n  hide: {\n    display: 'none',\n  },\n}))\n\n\nfunction App ({ account, ...props  }) {\n  const classes = useStyles()\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    if (account.logged)\n      setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  const menuLink = (path, text, icon) => (\n    <Link to={path} onClick={handleDrawerClose}>\n      <ListItem button key={text}>\n        <ListItemIcon>\n          {icon}\n        </ListItemIcon>\n        <ListItemText primary={text} />\n      </ListItem>\n    </Link>\n  );\n\n  return (\n    <Router>\n      <div className={classes.root}>\n        <CssBaseline />\n\n        <AppBar position=\"static\" className={classes.appBar}>\n          <Toolbar className={classes.appToolbar}>\n            {account.logged && (\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n                onClick={handleDrawerOpen}\n                edge=\"start\"\n                className={classes.menuButton}\n              >\n                <MenuIcon />\n              </IconButton>\n            )}\n            <Typography variant=\"h6\">\n              <Link to=\"/\">\n                <div className={classes.toolbarTitle}>\n                  <span>Lero</span>\n                  <SocketStatus />\n                </div>\n              </Link>\n            </Typography>\n            <div style={{ flex: '1' }} />\n            <UserStatus />\n          </Toolbar>\n        </AppBar>\n\n        <SwipeableDrawer\n          className={classes.drawer}\n          anchor=\"left\"\n          open={open}\n          onOpen={handleDrawerOpen}\n          onClose={handleDrawerClose}\n          classes={{\n            paper: classes.drawerPaper,\n          }}\n        >\n          <div className={classes.drawerHeader}>\n            <IconButton onClick={handleDrawerClose}>\n              <ChevronLeftIcon style={{ color: 'white' }} />\n            </IconButton>\n          </div>\n          <div className={classes.drawerContainer}>\n            <Divider />\n            <List>\n              {menuLink(\"/\", \"/conversations\", <ForumIcon style={{ color: '#fff' }} />)}\n            </List>\n            {account.logged && (\n              <React.Fragment>\n                <Divider />\n                <List>\n                  {menuLink(\"/new\", \"/start_new\", <CreateIcon style={{ color: '#fff' }} />)}\n                </List>\n                <List>\n                  <ListItem onClick={() => {\n                    props.doLogout()\n                    handleDrawerClose()\n                  }} button key='logout'>\n                    <ListItemIcon>\n                      <ExitToAppIcon style={{ color: '#fff' }}/>\n                    </ListItemIcon>\n                    <ListItemText primary='/logout' />\n                  </ListItem>\n                </List>\n              </React.Fragment>)\n            }\n          </div>\n        </SwipeableDrawer>\n        {<main>\n          <Container component=\"main\" className={classes.main} maxWidth=\"md\">\n            {account.logged \n            ? (<Switch>\n                <Route path=\"/favorite\">\n                  <p>Favorite</p>\n                </Route>\n                <Route path=\"/archived\">\n                  <p>Archived</p>\n                </Route>\n                <Route path=\"/new\">\n                  <NewConversation />\n                </Route>\n                <Route path=\"/\">\n                  <ConversationRouter />\n                </Route>\n              </Switch>)\n            : (\n              <LoginScreen />\n            )}\n          </Container>\n        </main>}\n\n      </div>\n    </Router>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    account: state.account\n  }\n}\n\nfunction mapDispatchToProps (dispatch) {\n  return {\n    doLogout: () => dispatch(doLogout())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import { red } from '@material-ui/core/colors';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#7d130c',\n    },\n    secondary: {\n      main: '#FFCF99',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#1E1E24',\n    },\n    text: {\n      primary: '#FFF8F0',\n      secondary: '#e6e6e6'\n    },\n  },\n  typography: {\n    fontFamily: \"SourceCodePro, RetroGaming, VCRMono, monospace\"\n  },\n});\n\nexport default theme;\n","import { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILURE, LOGOUT } from '../actionTypes'\n\nconst INITIAL_STATE = {\n  logged: false,\n  user: null,\n  token: \"\",\n  loading: false\n}\n\nfunction accountReducer(state = INITIAL_STATE, action) {\n  console.log(action)\n  switch (action.type) {\n    case LOGIN_REQUEST:\n      return {...state, loading: true}\n    case LOGIN_SUCCESS:\n      const { token, user } = action.payload\n      localStorage.setItem('auth_token', token);\n      return {...state, loading: false, token, user, logged: true}\n    case LOGIN_FAILURE:\n      localStorage.removeItem('auth_token')\n      return INITIAL_STATE\n    case LOGOUT:\n      localStorage.removeItem('auth_token')\n      return INITIAL_STATE\n    default:\n      return state\n  }\n}\n\nexport default accountReducer\n","import _ from 'lodash'\nimport {\n  LOGOUT,\n  SELECT_CONVERSATION,\n  CLEAR_SELECT_CONVERSATION,\n  FETCH_CONVERSATION_REQUEST,\n  FETCH_CONVERSATION_SUCCESS,\n  FETCH_CONVERSATION_FAILURE,\n  ON_NEW_CONVERSATION,\n  ON_UPD_CONVERSATION,\n  FETCH_CURRENT_MESSAGES_REQUEST,\n  FETCH_CURRENT_MESSAGES_SUCCESS,\n  FETCH_CURRENT_MESSAGES_FAILURE,\n  CONVERSATION_RECEIVED_MESSAGE\n} from '../actionTypes'\n\nconst INITIAL_STATE = {\n  conversations: [\n    {\n      id: 1,\n      title: 'Hello world',\n      messages: [\n        {\n          id: 1,\n          content: 'Hello',\n          direction: 'out'\n        },\n        {\n          id: 2,\n          content: 'Hi there',\n          direction: 'in'\n        },\n      ] \n    }\n  ],\n  currentConversation: {},\n  loading: false\n}\n\nfunction conversationReducer(state = INITIAL_STATE, action) {\n  switch (action.type) {\n    case FETCH_CONVERSATION_REQUEST:\n      return {...state, loading: true}\n    case FETCH_CONVERSATION_SUCCESS:\n      return {...state, conversations: action.payload, loading: false}\n    case FETCH_CONVERSATION_FAILURE:\n      return {...state, conversations: [], loading: false}\n\n    case FETCH_CURRENT_MESSAGES_REQUEST:\n      return {...state, loading: true}\n    case FETCH_CURRENT_MESSAGES_SUCCESS:\n      const { conversation, messages } = action.payload\n      return {...state, loading: false, currentConversation: {...conversation, messages: sortMessages(messages) }}\n    case FETCH_CURRENT_MESSAGES_FAILURE:\n      return {...state, loading: false, currentConversation: {...state.currentConversation, messages: []}}\n\n    case ON_NEW_CONVERSATION:\n      return {...state, conversations: [...state.conversations, action.payload]}\n    case ON_UPD_CONVERSATION:\n      return {...state, conversations: onUpdateConversation(state, action.payload)}\n    \n    case CONVERSATION_RECEIVED_MESSAGE:\n      if (state.currentConversation.id) {\n        const messages = [...state.currentConversation.messages, action.payload]\n        return {...state, currentConversation: {...state.currentConversation, messages: sortMessages(messages) }}\n      } else {\n        return state\n      }\n\n    case SELECT_CONVERSATION:\n      return {...state, conversations: clearUpdatedOnConversation(state, action.payload.id), currentConversation: action.payload}\n    case CLEAR_SELECT_CONVERSATION:\n      return {...state, currentConversation: {}}\n    case LOGOUT:\n      return INITIAL_STATE\n    default:\n      return state\n  }\n}\n\nfunction sortMessages (messages) {\n  return _.orderBy(messages, 'time', 'desc')\n}\n\nfunction clearUpdatedOnConversation (state, convsId) {\n  return state.conversations.map(convs => {\n    if (convs.id !== convsId) return convs;\n    return {...convs, updated: false}\n  })\n}\n\nfunction onUpdateConversation (state, conversation) {\n  return state.conversations.map(convs => {\n    if (convs.id === conversation.id && state.currentConversation.id != conversation.id) {\n      return { ...conversation, updated: true }\n    } else {\n      return convs\n    }\n  })\n}\n\nexport default conversationReducer\n","import {\n  LOGIN_SUCCESS,\n  LOGIN_FAILURE,\n  LOGOUT,\n  SOCKET_REQUEST,\n  SOCKET_CONNECT,\n  SOCKET_FAILURE,\n} from '../actionTypes'\nimport { joinUser, leaveUser } from '../../socket'\n\nconst INITIAL_STATE = {\n  user: null,\n  connected: false,\n  loading: false,\n  socket: null\n}\n\nfunction socketReducer(state = INITIAL_STATE, action) {\n  switch (action.type) {\n    case LOGIN_SUCCESS:\n      return {...state, user: action.payload.user}\n    case LOGIN_FAILURE:\n      return {...state, user: null}\n\n    case SOCKET_REQUEST:\n      return {...state, loading: true, connected: false}\n    case SOCKET_CONNECT:\n      return {connected: true, loading: false, socket: action.payload}\n    case SOCKET_FAILURE:\n      leaveUser()\n      return INITIAL_STATE\n\n    case LOGOUT:\n      leaveUser()\n      state.socket && state.socket.disconnect(() => console.log('socket disconnected'))\n      return INITIAL_STATE\n    default:\n      return state\n  }\n}\n\nexport default socketReducer\n","import { combineReducers } from 'redux'\nimport accountReducer from './accountReducer'\nimport conversationReducer from './conversationReducer'\nimport socketReducer from './socketReducer'\n\nexport default combineReducers({\n  account: accountReducer,\n  conversation: conversationReducer,\n  socketConnection: socketReducer\n})\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport { SnackbarProvider } from 'notistack';\nimport App from './App';\nimport theme from './theme';\n\nimport { Provider } from 'react-redux'\n\nimport configureStore from './store'\n\nconst store = configureStore();\n\nexport const registerServiceWorker = () => {\n  if ('serviceWorker' in navigator) {\n    window.addEventListener('load', function () {\n      navigator.serviceWorker.register('/sw.js').then(function (registration) {\n        // Registration was successful\n        //console.log('ServiceWorker registration successful with scope: ', registration.scope);\n      }).catch(function (err) {\n        // registration failed :(\n        //console.log('ServiceWorker registration failed: ', err);\n      });\n    });\n  }\n}\n\nregisterServiceWorker()\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n    <CssBaseline />\n    <Provider store={store}>\n      <SnackbarProvider maxSnack={3}>\n        <App />\n      </SnackbarProvider>\n    </Provider>\n  </ThemeProvider>,\n  document.querySelector('#root'),\n);\n","import { applyMiddleware, compose, createStore } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\n\nimport rootReducer from './reducers'\n\nexport default function configureStore(preloadedState) {\n  const middlewares = [thunkMiddleware]\n  const middlewareEnhancer = applyMiddleware(...middlewares)\n\n  const enhancers = [middlewareEnhancer]\n  const composedEnhancers = compose(...enhancers)\n\n  const store = createStore(rootReducer, preloadedState, composedEnhancers)\n\n  return store\n}"],"sourceRoot":""}