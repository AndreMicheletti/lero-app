(this["webpackJsonplero-app"]=this["webpackJsonplero-app"]||[]).push([[0],{244:function(e,t){},246:function(e,t){},257:function(e,t){},259:function(e,t){},286:function(e,t){},288:function(e,t){},289:function(e,t){},294:function(e,t){},296:function(e,t){},315:function(e,t){},327:function(e,t){},330:function(e,t){},380:function(e,t,n){"use strict";n.r(t),n.d(t,"registerServiceWorker",(function(){return vt}));var a=n(0),r=n.n(a),o=n(12),c=n.n(o),i=n(434),s=n(438),l=n(54),u=n(41),d=n(214),j=n(7),f=n(19),b=n(425),p=n(45),O=n(15),v=n(435),g=n(436),h=n(437),x=n(101),m=n(441),y=n(427),C=n(428),S=n(431),w=n(432),k=n(433),N=n(429),E=n(208),T=n.n(E),_=n(209),I=n.n(_),A=n(206),R=n.n(A),F=n(207),L=n.n(F),U=n(210),B=n.n(U),D=n(442),z=n(426),V=(n(239),n(204)),G=n.n(V),H=n(439),W=n(205),M=n.n(W),J=n(203),P=n.n(J),q=n(46),Q=n.n(q),K={stringify:function(e){var t={ct:e.ciphertext.toString(Q.a.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t)},parse:function(e){var t=JSON.parse(e),n=Q.a.lib.CipherParams.create({ciphertext:Q.a.enc.Base64.parse(t.ct)});return t.iv&&(n.iv=Q.a.enc.Hex.parse(t.iv)),t.s&&(n.salt=Q.a.enc.Hex.parse(t.s)),n}},X=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return null}},Y=n(2),Z=Object(b.a)((function(e){return{terminal:{fontFamily:"VCRMono",fontWeight:100,fontSize:16}}}));function $(e){var t=e.prefix,n=e.color,a=e.children,r=e.style,o=void 0===r?{}:r,c=Z();return Object(Y.jsxs)("span",{className:c.terminal,style:Object(j.a)(Object(j.a)({},o),{},{color:n||"#fff"}),children:[t,a]})}var ee=Object(b.a)((function(e){return{line:{marginBottom:4,marginTop:4,display:"grid",alignItems:"flex-start",overflowWrap:"anywhere",gridGap:10},bubble:{gridArea:"bubble",color:"#fff"},name:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gridArea:"name",overflowWrap:"anywhere"},none:{gridArea:"none"}}}));var te,ne,ae=function(e){var t,n,a=e.yourName,r=e.targetName,o=e.content,c=e.time,i=e.direction,s=ee(),l="out"===i,u=l?"#b55f5f":"#b58f5f",d=c.toString().substr(10),j=(t=X(localStorage.getItem("auth_token")),n=JSON.stringify(o),Q.a.AES.decrypt(n,t.iss,{format:K}).toString(Q.a.enc.Utf8));return Object(Y.jsxs)("div",{className:s.line,style:l?{gridTemplateAreas:'"none bubble name"',gridTemplateColumns:"auto minmax(min-content, 100%) auto",textAlign:"right"}:{gridTemplateAreas:'"name bubble none"',gridTemplateColumns:"auto minmax(min-content, 100%) auto",textAlign:"left"},children:[Object(Y.jsx)("div",{className:s.bubble,children:Object(Y.jsx)($,{style:{fontWeight:100},children:j})}),Object(Y.jsxs)("div",{className:s.name,children:[Object(Y.jsx)($,{color:u,style:{fontWeight:500},children:l?"@"+a:"@"+r}),Object(Y.jsx)($,{color:u,style:{fontSize:"0.8em"},children:d})]}),Object(Y.jsx)("span",{className:s.none})]})},re=n(35),oe=n.n(re),ce=n(62),ie=n(57),se=n.n(ie),le="LOGIN_REQUEST",ue="LOGIN_SUCCESS",de="LOGIN_FAILURE",je="LOGOUT",fe="SELECT_CONVERSATION",be="CLEAR_SELECT_CONVERSATION",pe="CONVERSATION_RECEIVED_MESSAGE",Oe="ON_NEW_CONVERSATION",ve="ON_UPD_CONVERSATION",ge="FETCH_CONVERSATION_REQUEST",he="FETCH_CONVERSATION_SUCCESS",xe="FETCH_CONVERSATION_FAILURE",me="FETCH_CURRENT_MESSAGES_REQUEST",ye="FETCH_CURRENT_MESSAGES_SUCCESS",Ce="FETCH_CURRENT_MESSAGES_FAILURE",Se="SOCKET_REQUEST",we="SOCKET_CONNECT",ke="SOCKET_FAILURE",Ne="https://polar-ridge-40128.herokuapp.com",Ee=function(e){return{type:fe,payload:e}},Te=n(202),_e=function(e){ne||console.warn("tried to send message disconnected from conversationChannel (sendMessage)");var t,n,a=(t=X(localStorage.getItem("auth_token")),n=e,JSON.parse(Q.a.AES.encrypt(n,t.iss,{format:K}).toString()));ne.push("send_message",a)},Ie=function(){ne&&(ne.leave(500).receive("ok",(function(){return console.log("left channel conversation")})),ne=null)},Ae=function(){te&&(te.leave(500).receive("ok",(function(){return console.log("left channel conversation")})),te=null)},Re=Object(b.a)((function(e){return{root:{flexGrow:0,position:"relative"},socketDown:{width:"100%",height:"100%",background:"#00000055",position:"absolute"},head:{paddingBottom:8,paddingLeft:5,paddingRight:5,display:"grid",gridTemplateColumns:"auto 1fr auto",gridColumnGap:15,alignItems:"center",textAlign:"right"},paper:{padding:"10px 15px",color:"#fff",display:"grid",gridTemplateRows:"55px 10px 55vh 10px 40px"},messages:{display:"flex",flexDirection:"column-reverse",overflowX:"hidden",overflowY:"overlay",paddingRight:20,paddingBottom:5},inputBar:{display:"grid",gridTemplateColumns:"1fr 40px",alignItems:"center",paddingTop:5,paddingBottom:5},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var Fe=Object(f.b)((function(e){return{currentUser:e.account.user,conversation:e.conversation.currentConversation,loading:e.conversation.loading,socket:e.socketConnection.socket,socketConnected:e.socketConnection.connected}}),(function(e){return{onReceivedMessage:function(t,n){return e(function(e,t){return{type:pe,payload:{id:e.id,content:e.content,time:e.time,direction:e.user_id===t.id?"out":"in"}}}(t,n))},clearSelectConversation:function(){return e({type:be})},fetchCurrentMessages:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ce.a)(oe.a.mark((function a(r){var o,c;return oe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:me}),a.prev=1,o=localStorage.getItem("auth_token"),a.next=5,se.a.get(Ne+"/api/conversations/".concat(e,"/messages"),{headers:{Authorization:"Bearer ".concat(o)}});case 5:if((c=a.sent).data.success){a.next=9;break}throw c.data;case 9:r({type:ye,payload:c.data}),t(),a.next=18;break;case 13:a.prev=13,a.t0=a.catch(1),console.warn(a.t0),r({type:Ce}),n();case 18:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))}}}))(Object(l.b)((function(e){var t=e.currentUser,n=e.conversation,o=e.fetchCurrentMessages,c=e.onReceivedMessage,i=e.socket,s=e.socketConnected,l=e.enqueueSnackbar,d=e.clearSelectConversation,j=e.loading,f=Object(O.f)(),b=Re(),v=r.a.useState(""),g=Object(u.a)(v,2),h=g[0],x=g[1],m=r.a.useState(!1),C=Object(u.a)(m,2),S=C[0],w=C[1],k=Object(a.useRef)(null);return r.a.useEffect((function(){return o(n.id,(function(){}),(function(){l("Erro ao carregar mensagens",{variant:"warning"}),f.push("/")})),function(){Ie(),d()}}),[]),r.a.useEffect((function(){if(!S&&s)try{console.log("using effect to JOINCONVERSATION"),function(e,t,n){ne&&Ie(),(ne=e.channel("conversation:".concat(t))).join().receive("ok",(function(e){console.log("joined conversation",e)})),ne.on("new_message",(function(e){n(e.message)}))}(i,n.id,(function(e){c(e,t)})),w(!0)}catch(e){console.warn(e),w(!1)}}),[s]),Object(Y.jsxs)("div",{className:b.root,children:[!s&&Object(Y.jsx)("div",{className:b.socketDown}),Object(Y.jsx)(D.a,{className:b.backdrop,open:j,children:Object(Y.jsx)(z.a,{color:"inherit"})}),Object(Y.jsxs)("div",{className:b.paper,children:[Object(Y.jsxs)("div",{className:b.head,children:[Object(Y.jsx)(p.b,{to:"/",children:Object(Y.jsx)(P.a,{})}),Object(Y.jsx)($,{prefix:"#/ @",children:n.title}),Object(Y.jsx)(G.a,{})]}),Object(Y.jsx)(y.a,{}),Object(Y.jsx)("div",{className:b.messages,children:j?null:s&&n&&n.messages?Object(Y.jsx)("div",{className:b.messages,children:n.messages&&n.messages.map((function(e){return Object(Y.jsx)(ae,{yourName:t.name,targetName:n.title,content:e.content,direction:e.direction,time:e.time},e.id)}))}):void 0}),Object(Y.jsx)(y.a,{}),Object(Y.jsxs)("form",{className:b.inputBar,onSubmit:function(e){if(e.preventDefault(),S)if(h&&""!==h)try{_e(h)}finally{x(""),k.current.focus()}else l("Digite a mensagem",{variant:"warning"});else l("N\xe3o conectado ao canal",{variant:"warning"})},noValidate:!0,autoComplete:"false",children:[Object(Y.jsx)(H.a,{autoFocus:!0,inputRef:k,color:"primary",value:h,onChange:function(e){x(e.target.value)}}),Object(Y.jsx)(N.a,{"aria-label":"delete",className:b.margin,size:"small",type:"submit",children:Object(Y.jsx)(M.a,{fontSize:"default",style:{color:"#fff"}})})]})]})]})}))),Le=Object(b.a)((function(e){return{conversation:{padding:"10px 15px",marginBottom:8,display:"grid",gridTemplateColumns:"auto 1fr",gridColumnGap:15,alignItems:"center",backgroundColor:"#4f4f4f",color:"#fff"}}}));var Ue=Object(f.b)(null,(function(e){return{selectConversation:function(t){return e(Ee(t))}}}))((function(e){var t=e.id,n=e.conversation,a=e.selectConversation;return Le(),Object(Y.jsxs)(p.b,{to:"/conversations/".concat(t),onClick:function(){return a(n)},children:[Object(Y.jsx)($,{prefix:"<".concat(t,"> conversation#/ "),children:n.title}),n.updated&&Object(Y.jsx)($,{prefix:" ",color:"red",children:"<!!>"})]})})),Be=Object(b.a)((function(e){return{root:{overflow:"hidden",maxHeight:"100vh"},conversations:{display:"flex",flexDirection:"column"}}}));var De=Object(f.b)((function(e){return{account:e.account,conversations:e.conversation.conversations,loading:e.conversation.loading}}),(function(e){return{fetchConversations:function(){return e(function(){var e=Object(ce.a)(oe.a.mark((function e(t){var n,a,r,o,c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ge}),e.prev=1,n=localStorage.getItem("auth_token"),e.next=5,se.a.get(Ne+"/api/conversations",{headers:{Authorization:"Bearer ".concat(n)}});case 5:if(a=e.sent,r=a.data,o=r.success,c=r.conversations,o){e.next=9;break}throw Error("could fetch conversations");case 9:t({type:he,payload:c}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.warn(e.t0),t({type:xe});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){e.account;var t=e.conversations,n=e.loading,a=e.fetchConversations,o=Object(O.g)(),c=Be();return r.a.useEffect((function(){a()}),[]),Object(Y.jsxs)("div",{className:c.root,children:[Object(Y.jsx)("div",{style:{height:10}}),Object(Y.jsxs)(O.c,{children:[Object(Y.jsx)(O.a,{path:"".concat(o.path,"conversations/:conversationId"),children:Object(Y.jsx)(Fe,{})}),Object(Y.jsx)(O.a,{path:o.path,children:Object(Y.jsx)("div",{className:c.conversations,children:n?Object(Y.jsx)("span",{children:"loading..."}):t&&0!=t.length?t.map((function(e){return Object(Y.jsx)(Ue,{id:e.id,conversation:e},e.id)})):Object(Y.jsx)("span",{children:"Nenhuma conversa..."})})})]})]})})),ze=n(430),Ve=function(e,t,n){return function(e){e({type:Se});try{var a=function(){var e=localStorage.getItem("auth_token"),t=new Te.Socket("wss://polar-ridge-40128.herokuapp.com/socket",{params:{token:e}});return t.connect(),t}();!function(e,t,n,a){te&&Ae(),(te=e.channel("conversation:lobby")).join().receive("ok",(function(e){console.log("joined user channel",e)})),te.on("new_conversation",(function(e){n(e.conversation)})),te.on("upd_conversation",(function(e){a(e.conversation)}))}(a,0,t,n),e({type:we,payload:a})}catch(r){console.warn(r),e({type:ke})}}},Ge=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexGrow:1,paddingTop:15,padding:8},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var He=Object(f.b)((function(e){return{account:e.account}}),(function(e){return{doLogin:function(t,n,a,r){return e(function(e,t,n,a){return function(){var r=Object(ce.a)(oe.a.mark((function r(o){var c,i,s,l,u;return oe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o({type:le}),r.prev=1,r.next=4,se.a.post(Ne+"/api/login",{secret_code:e,password:t});case 4:if(c=r.sent,i=c.data,s=i.success,l=i.token,s){r.next=8;break}throw c;case 8:return r.next=10,se.a.get(Ne+"/api/user",{headers:{Authorization:"Bearer ".concat(l)}});case 10:(u=r.sent).data.success,o({type:ue,payload:{token:l,user:u.data.user}}),n(u.data.user),r.next=21;break;case 16:r.prev=16,r.t0=r.catch(1),console.warn(r.t0),o({type:de}),a();case 21:case"end":return r.stop()}}),r,null,[[1,16]])})));return function(e){return r.apply(this,arguments)}}()}(t,n,a,r))},doAutoLogin:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ce.a)(oe.a.mark((function a(r){var o;return oe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:le}),a.prev=1,a.next=4,se.a.get(Ne+"/api/user",{headers:{Authorization:"Bearer ".concat(e)}});case 4:if((o=a.sent).data.success){a.next=7;break}throw Error("could not fetch user data");case 7:r({type:ue,payload:{token:e,user:o.data.user}}),t(o.data.user),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(1),console.warn(a.t0),r({type:de}),n();case 16:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))},connectSocket:function(t,n,a){return e(Ve(0,n,a))},addConversation:function(t){return e(function(e){return{type:Oe,payload:e}}(t))},updateConversation:function(t){return e(function(e){return{type:ve,payload:e}}(t))}}}))(Object(l.b)((function(e){var t=Ge(),n=Object(O.f)(),a=r.a.useState(""),o=Object(u.a)(a,2),c=o[0],i=o[1],s=r.a.useState(""),l=Object(u.a)(s,2),d=l[0],j=l[1];return r.a.useEffect((function(){var t=localStorage.getItem("auth_token");t&&""!==t&&e.doAutoLogin(t,(function(t){e.connectSocket(t.id,e.addConversation,e.updateConversation),n.push("/")}),(function(){}))}),[]),Object(Y.jsx)("div",{className:t.root,children:Object(Y.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""===c||""===d?e.enqueueSnackbar("Preencha os campos",{variant:"warning"}):e.doLogin(c,d,(function(t){e.connectSocket(t.id,e.addConversation,e.updateConversation)}),(function(){e.enqueueSnackbar("Login falhou. Verifique os dados.",{variant:"error"})}))},autoComplete:"no",children:[Object(Y.jsx)(D.a,{className:t.backdrop,open:e.account.loading,children:Object(Y.jsx)(z.a,{color:"inherit"})}),Object(Y.jsx)(H.a,{label:"C\xf3digo secreto",value:c,onChange:function(e){return i(e.target.value)},variant:"outlined",color:"secondary",autoComplete:"no"}),Object(Y.jsx)("div",{style:{height:10}}),Object(Y.jsx)(H.a,{type:"password",value:d,onChange:function(e){return j(e.target.value)},label:"Senha",variant:"outlined",color:"secondary",autoComplete:"new-password"}),Object(Y.jsx)("div",{style:{height:15}}),Object(Y.jsx)(ze.a,{type:"submit",variant:"contained",color:"secondary",children:"Entrar"})]})})}))),We=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexGrow:1,paddingTop:15,padding:8}}}));var Me=Object(f.b)((function(e){return{account:e.account}}),(function(e){return{startConversation:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(ce.a)(oe.a.mark((function a(r){var o,c,i,s,l;return oe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"START_CONVERSATION_REQUEST"}),a.prev=1,o=localStorage.getItem("auth_token"),a.next=5,se.a.post(Ne+"/api/message",{content:"Vamos bater um lero",secret_code:e},{headers:{Authorization:"Bearer ".concat(o)}});case 5:if(c=a.sent,i=c.data,s=i.success,l=i.message,s){a.next=9;break}throw c.data;case 9:r({type:"START_CONVERSATION_SUCCESS",payload:l}),t(l.conversation_id),a.next=18;break;case 13:a.prev=13,a.t0=a.catch(1),console.warn(a.t0),r({type:"START_CONVERSATION_FAILURE"}),n();case 18:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))},selectConversation:function(t){return e(Ee(t))}}}))(Object(l.b)((function(e){e.account;var t=e.startConversation,n=e.enqueueSnackbar,a=e.selectConversation,o=We(),c=Object(O.f)(),i=r.a.useState(""),s=Object(u.a)(i,2),l=s[0],d=s[1];return Object(Y.jsx)("div",{className:o.root,children:Object(Y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l&&""!==l?t(l,(function(e){a({id:e,title:l}),c.push("/conversations/"+e)}),(function(){n("C\xf3digo secreto n\xe3o encontrado",{variant:"info"})})):n("Preencha o campo",{variant:"warning"})},children:[Object(Y.jsx)(H.a,{label:"C\xf3digo secreto",color:"secondary",value:l,onChange:function(e){d(e.target.value)},variant:"outlined"}),Object(Y.jsx)("div",{style:{height:15}}),Object(Y.jsx)(ze.a,{type:"submit",variant:"contained",color:"secondary",children:"Iniciar Conversa"})]})})}))),Je=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"row",alignItems:"baseline"},button:{},userName:{display:"flex",flexDirection:"column",justifyContent:"flex-end",textAlign:"right"}}}));var Pe=Object(f.b)((function(e){return{account:e.account}}))((function(e){var t=e.account,n=Je();return t.logged?Object(Y.jsx)("div",{className:n.root,children:Object(Y.jsxs)("div",{className:n.userName,children:[Object(Y.jsx)("span",{style:{fontSize:"1.2em",fontWeight:500},children:t.user.name}),Object(Y.jsx)("span",{children:t.user.secretCode})]})}):Object(Y.jsx)(ze.a,{color:"inherit",className:n.button,children:"Login"})})),qe=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"row",alignItems:"baseline"}}})),Qe="#666";var Ke=Object(f.b)((function(e){return{status:e.socketConnection}}))((function(e){var t=e.status,n=qe(),a=t.connected,r=t.loading,o=r?Qe:a?"#FFCF99":Qe,c=r?"connecting...":a?"connected":"disconnected";return Object(Y.jsxs)("div",{className:n.root,children:[Object(Y.jsx)($,{color:"#FFF",style:{fontSize:"0.65em",fontWeight:100,paddingRight:5},children:"status:"}),Object(Y.jsx)($,{color:o,style:{fontSize:"0.65em",fontWeight:600},children:c})]})})),Xe=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh",flexGrow:1},main:{padding:15},appBar:{zIndex:e.zIndex.drawer+1},appToolbar:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignContent:"center",padding:"3px 15px"},toolbarTitle:{display:"flex",flexDirection:"column"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,backgroundColor:"#333",color:"#fff"},drawerContainer:{overflow:"auto"},drawerHeader:Object(j.a)(Object(j.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3)},menuButton:{},hide:{display:"none"}}}));var Ye=Object(f.b)((function(e){return{account:e.account}}),(function(e){return{doLogout:function(){return e({type:je})}}}))((function(e){var t=e.account,n=Object(d.a)(e,["account"]),a=Xe(),o=r.a.useState(!1),c=Object(u.a)(o,2),s=c[0],l=c[1],j=function(){t.logged&&l(!0)},f=function(){l(!1)},b=function(e,t,n){return Object(Y.jsx)(p.b,{to:e,onClick:f,children:Object(Y.jsxs)(S.a,{button:!0,children:[Object(Y.jsx)(w.a,{children:n}),Object(Y.jsx)(k.a,{primary:t})]},t)})};return Object(Y.jsx)(p.a,{children:Object(Y.jsxs)("div",{className:a.root,children:[Object(Y.jsx)(i.a,{}),Object(Y.jsx)(v.a,{position:"static",className:a.appBar,children:Object(Y.jsxs)(g.a,{className:a.appToolbar,children:[t.logged&&Object(Y.jsx)(N.a,{color:"inherit","aria-label":"open drawer",onClick:j,edge:"start",className:a.menuButton,children:Object(Y.jsx)(R.a,{})}),Object(Y.jsx)(x.a,{variant:"h6",children:Object(Y.jsx)(p.b,{to:"/",children:Object(Y.jsxs)("div",{className:a.toolbarTitle,children:[Object(Y.jsx)("span",{children:"Lero"}),Object(Y.jsx)(Ke,{})]})})}),Object(Y.jsx)("div",{style:{flex:"1"}}),Object(Y.jsx)(Pe,{})]})}),Object(Y.jsxs)(m.a,{className:a.drawer,anchor:"left",open:s,onOpen:j,onClose:f,classes:{paper:a.drawerPaper},children:[Object(Y.jsx)("div",{className:a.drawerHeader,children:Object(Y.jsx)(N.a,{onClick:f,children:Object(Y.jsx)(L.a,{style:{color:"white"}})})}),Object(Y.jsxs)("div",{className:a.drawerContainer,children:[Object(Y.jsx)(y.a,{}),Object(Y.jsx)(C.a,{children:b("/","/conversations",Object(Y.jsx)(T.a,{style:{color:"#fff"}}))}),t.logged&&Object(Y.jsxs)(r.a.Fragment,{children:[Object(Y.jsx)(y.a,{}),Object(Y.jsx)(C.a,{children:b("/new","/start_new",Object(Y.jsx)(I.a,{style:{color:"#fff"}}))}),Object(Y.jsx)(C.a,{children:Object(Y.jsxs)(S.a,{onClick:function(){n.doLogout(),f()},button:!0,children:[Object(Y.jsx)(w.a,{children:Object(Y.jsx)(B.a,{style:{color:"#fff"}})}),Object(Y.jsx)(k.a,{primary:"/logout"})]},"logout")})]})]})]}),Object(Y.jsx)("main",{children:Object(Y.jsx)(h.a,{component:"main",className:a.main,maxWidth:"md",children:t.logged?Object(Y.jsxs)(O.c,{children:[Object(Y.jsx)(O.a,{path:"/favorite",children:Object(Y.jsx)("p",{children:"Favorite"})}),Object(Y.jsx)(O.a,{path:"/archived",children:Object(Y.jsx)("p",{children:"Archived"})}),Object(Y.jsx)(O.a,{path:"/new",children:Object(Y.jsx)(Me,{})}),Object(Y.jsx)(O.a,{path:"/",children:Object(Y.jsx)(De,{})})]}):Object(Y.jsx)(He,{})})})]})})})),Ze=n(100),$e=n(213),et=Object($e.a)({palette:{primary:{main:"#7d130c"},secondary:{main:"#FFCF99"},error:{main:Ze.a.A400},background:{default:"#1E1E24"},text:{primary:"#FFF8F0",secondary:"#e6e6e6"}},typography:{fontFamily:"SourceCodePro, RetroGaming, VCRMono, monospace"}}),tt=n(56),nt=n(211),at={logged:!1,user:null,token:"",loading:!1};var rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case le:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case ue:var n=t.payload,a=n.token,r=n.user;return localStorage.setItem("auth_token",a),Object(j.a)(Object(j.a)({},e),{},{loading:!1,token:a,user:r,logged:!0});case de:case je:return localStorage.removeItem("auth_token"),at;default:return e}},ot=n(131),ct=n(212),it=n.n(ct),st={conversations:[{id:1,title:"Hello world",messages:[{id:1,content:"Hello",direction:"out"},{id:2,content:"Hi there",direction:"in"}]}],currentConversation:{},loading:!1};function lt(e){return it.a.orderBy(e,"time","desc")}function ut(e,t){return e.conversations.map((function(e){return e.id!==t?e:Object(j.a)(Object(j.a)({},e),{},{updated:!1})}))}function dt(e,t){return e.conversations.map((function(n){return n.id===t.id&&e.currentConversation.id!=t.id?Object(j.a)(Object(j.a)({},t),{},{updated:!0}):n}))}var jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case he:return Object(j.a)(Object(j.a)({},e),{},{conversations:t.payload,loading:!1});case xe:return Object(j.a)(Object(j.a)({},e),{},{conversations:[],loading:!1});case me:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case ye:var n=t.payload,a=n.conversation,r=n.messages;return Object(j.a)(Object(j.a)({},e),{},{loading:!1,currentConversation:Object(j.a)(Object(j.a)({},a),{},{messages:lt(r)})});case Ce:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,currentConversation:Object(j.a)(Object(j.a)({},e.currentConversation),{},{messages:[]})});case Oe:return Object(j.a)(Object(j.a)({},e),{},{conversations:[].concat(Object(ot.a)(e.conversations),[t.payload])});case ve:return Object(j.a)(Object(j.a)({},e),{},{conversations:dt(e,t.payload)});case pe:if(e.currentConversation.id){var o=[].concat(Object(ot.a)(e.currentConversation.messages),[t.payload]);return Object(j.a)(Object(j.a)({},e),{},{currentConversation:Object(j.a)(Object(j.a)({},e.currentConversation),{},{messages:lt(o)})})}return e;case fe:return Object(j.a)(Object(j.a)({},e),{},{conversations:ut(e,t.payload.id),currentConversation:t.payload});case be:return Object(j.a)(Object(j.a)({},e),{},{currentConversation:{}});case je:return st;default:return e}},ft={user:null,connected:!1,loading:!1,socket:null};var bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return Object(j.a)(Object(j.a)({},e),{},{user:t.payload.user});case de:return Object(j.a)(Object(j.a)({},e),{},{user:null});case Se:return Object(j.a)(Object(j.a)({},e),{},{loading:!0,connected:!1});case we:return{connected:!0,loading:!1,socket:t.payload};case ke:return Ae(),ft;case je:return Ae(),e.socket&&e.socket.disconnect((function(){return console.log("socket disconnected")})),ft;default:return e}},pt=Object(tt.c)({account:rt,conversation:jt,socketConnection:bt});var Ot=function(e){var t=[nt.a],n=[tt.a.apply(void 0,t)],a=tt.d.apply(void 0,n);return Object(tt.e)(pt,e,a)}(),vt=function(){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js").then((function(e){})).catch((function(e){}))}))};vt(),c.a.render(Object(Y.jsxs)(s.a,{theme:et,children:[Object(Y.jsx)(i.a,{}),Object(Y.jsx)(f.a,{store:Ot,children:Object(Y.jsx)(l.a,{maxSnack:3,children:Object(Y.jsx)(Ye,{})})})]}),document.querySelector("#root"))}},[[380,1,2]]]);
//# sourceMappingURL=main.708f72f8.chunk.js.map